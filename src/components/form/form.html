<div>
  <form novalidate>
    <div ng-if="field.fieldFormType != 'related'" class="row" ng-repeat="field in fields">
      <label ng-if='canShow(field)' class="col-sm-2 control-label">
        {{ field.label }}
        <div class="col-sm-10" ng-switch="field.type">
          <!-- Fields -->
          <carnival-text-field ng-switch-when="text" data="datas[field.name]" label="field.label"></carnival-text-field>
          <carnival-wysiwyg-field ng-switch-when="wysiwyg" data="datas[field.name]" label="field.label"></carnival-wysiwyg-field>
          <carnival-boolean-field ng-switch-when="boolean" data="datas[field.name]"></carnival-boolean-field>
          <carnival-string-field ng-switch-when="string" data="datas[field.name]" label="field.label"></carnival-string-field>
          <carnival-number-field ng-switch-when="number" data="datas[field.name]" label="field.label"></carnival-number-field>
          <carnival-date-field ng-switch-when="date" data="datas[field.name]"></carnival-date-field>
          <carnival-file-field ng-switch-when="file" data="datas[field.name]" field="field"></carnival-file-field>
          <carnival-enum-field ng-switch-when="enum" data="datas[field.name]" field="field"></carnival-enum-field>
          <carnival-currency-field ng-switch-when="currency" data="datas[field.name]" field="field"></carnival-currency-field>
          <carnival-belongs-to-field ng-if='canShow(field)' ng-switch-when="belongsTo" entity="entity" field="field" datas="entity.datas" action="entity.action" related-resources="entity.relatedResources" state="{{state}}"></carnival-belongs-to-field>
        </div>
      </label>
    </div>
    <label class="col-sm-2 control-label">
      <carnival-button label="{{ 'FORM_BUTTON_SAVE' | translate }}" style="success" size="small" ng-click="buttonAction()"></carnival-button>
    </label>
  </form>
  <fieldset>
    <legend>Relacionados</legend>
      <div ng-if="field.fieldFormType == 'related'" class="row" ng-repeat="field in fields">
        <label ng-if='canShow(field)' class="col-sm-2 control-label">
          {{ field.label }}
          <div class="col-sm-10" ng-switch="field.type">
            <!-- Fields -->
            <carnival-belongs-to-field ng-if='canShow(field)' ng-switch-when="belongsTo" entity="entity" field="field" datas="entity.datas" action="entity.action" related-resources="entity.relatedResources" state="{{state}}"></carnival-belongs-to-field>
            <carnival-has-many-field ng-if='canShow(field)' ng-switch-when="hasMany" entity="entity" field="field" datas="entity.datas" action="entity.action" related-resources="entity.relatedResources" state="{{state}}"></carnival-has-many-field>
          </div>
        </label>
      </div>
  </fieldset>
</div>
