(function(){"use strict";angular.module("carnival",["carnival.templates","ui.router","carnival.components","datePicker","duScroll","ngWig","angular-loading-bar"]).config(["$stateProvider","$urlRouterProvider","$locationProvider",function(a,b,c){b.otherwise("/"),a.state("main",{url:"/",templateUrl:"states/main/main.html",controller:"MainController"}).state("main.list",{url:"list/:entity",templateUrl:"states/main.list/list.html",controller:"ListController"}).state("main.show",{url:"show/:entity/:id",templateUrl:"states/main.show/show.html",controller:"ShowController"}).state("main.create",{url:"create/:entity",templateUrl:"states/main.create/create.html",controller:"CreateController"}).state("main.edit",{url:"edit/:entity/:id",templateUrl:"states/main.edit/edit.html",controller:"EditController"})}]).run(["Configuration","Entity",function(a,b){a.addExtraStates();for(var c=0,d=a.entities,e=d.length;e>c;c++)d[c]=new b(d[c].name,d[c].options)}]),angular.module("carnival.components.button",[]).directive("carnivalButton",function(){return{restrict:"E",replace:!0,scope:{label:"@",style:"@",size:"@"},templateUrl:"components/button/button.html"}}),angular.module("carnival.components.column-form",[]).directive("carnivalColumnForm",function(){return{restrict:"E",replace:!0,scope:{entity:"=",state:"@state",type:"@"},templateUrl:"components/column-form/column-form.html",controller:["$scope",function(a){}]}}),angular.module("carnival.components.column-listing",[]).directive("carnivalColumnListing",function(){return{restrict:"E",replace:!0,scope:{datas:"=",entity:"=",field:"=",identifier:"="},templateUrl:"components/column-listing/column-listing.html",controller:["$scope","FormService","Configuration","EntityResources",function(a,b,c,d){a.cssClass="fadeInRight",a.style={zIndex:10*b.columnsCount()+2,left:20*b.columnsCount()+"px",top:30*b.columnsCount()+"px",padding:"10px"},a.getListFields=function(){for(var b=[],c=0;c<a.entity.fields.length;c++){var d=a.entity.fields[c];"belongsTo"!==d.type&&"hasMany"!==d.type&&b.push(d)}return b}}]}}),angular.module("carnival.components",["carnival.components.button","carnival.components.form-column","carnival.components.has-many-table","carnival.components.has-many-select","carnival.components.column-form","carnival.components.column-listing","carnival.components.form-area","carnival.components.form","carnival.components.form-fields","carnival.components.show-fields","carnival.components.field-form-builder","carnival.components.form-fields-next","carnival.components.nested-form","carnival.components.summarized-items","carnival.components.delete-button","carnival.components.listing","carnival.components.listingfieldbelongsto","carnival.components.listingextraaction","carnival.components.listingfieldhasmany","carnival.components.listingfieldboolean","carnival.components.listingfield","carnival.components.navbar","carnival.components.fields","carnival.components.order-controller","carnival.components.pagination-controller","carnival.components.search-controller","carnival.components.notification","carnival.components.quickfilter-controller","carnival.components.listingFieldFile","carnival.components.listingFieldCurrency","carnival.components.listingFieldDate","carnival.components.uploader","carnival.components.gallery","carnival.components.listingFieldEnum","carnival.components.showBoolean","carnival.components.showCurrency","carnival.components.showDate","carnival.components.showEnum","carnival.components.showFile","carnival.components.showHasMany","carnival.components.showString","carnival.components.showWysiwyg"]),angular.module("carnival.components.delete-button",[]).directive("carnivalDeleteButton",function(){return{restrict:"E",replace:!0,scope:{action:"=",itemId:"="},templateUrl:"components/delete-button/delete-button.html",controller:["$scope","$filter",function(a,b){a["delete"]=function(){var c=b("translate");swal({title:c("ARE_YOU_SURE_DELETE"),showCancelButton:!0,confirmButtonText:c("YES"),cancelButtonText:c("NO"),closeOnConfirm:!0},function(){a.action(a.itemId)}),a.isDeleting=!0}}]}}),angular.module("carnival.components.field-form-builder",[]).directive("carnivalFieldFormBuilder",function(){return{restrict:"E",replace:!0,scope:{parentEntity:"=",field:"=",data:"=",state:"@",label:"@"},templateUrl:"components/field-form-builder/field-form-builder.html",controller:["$rootScope","$scope","$timeout","utils","$element","$compile","FormService","Configuration","EntityResources","Notification","$filter","$state",function(a,b,c,d,e,f,g,h,i,j,k,l){var m=function(a){var c=b.field.views[a].nested;if("column"===c.type)return"#form-columns";var d="";return"edit"===a&&(d="_"+b.data[b.field.identifier]),"#"+a+"_nested_"+b.field.entityName+d},n=function(a){if(b.parentEntity){var c=a.model.getFieldByEntityName(b.parentEntity.name);c&&("hasMany"!==c.type&&"belongsTo"!==c.type||(a.datas[c.foreignKey]=b.parentEntity.datas[b.parentEntity.identifier]))}};b._openForm=function(a,c){var d=m(c);n(a);var e=b.$new();e.entity=a,e.state=c;var f=b.field.views[c].nested;"column"===f.type?g.openColumn(c,d,e):g.openNested(c,d,e)},b.getButtonLabel=function(){return b.label?b.label:"edit"===b.state?"Edit":void 0},b.openWithData=function(){var a=i.prepareForEditState(b.field.entityName,b.parentEntity),c=a.identifier,d=b.data[c];a.model.getOne(d).success(function(e){a[c]=d,a.datas=e,b._openForm(a,"edit")})},b.open=function(){var a=i.prepareForCreateState(b.field.entityName,b.parentEntity);b._openForm(a,"create")},b["delete"]=function(a){var c=i.prepareForListState(b.field.entityName);c.model["delete"](a).success(function(){var a=k("translate")("DELETED_SUCCESS_MESSAGE");new j(a,"warning"),l.reload()}).error(function(a){new j(a,"danger")})}}]}}),angular.module("carnival.components.fields.belongsTo",[]).directive("carnivalBelongsToField",function(){return{restrict:"E",replace:!0,scope:{datas:"=",field:"=",parentEntity:"=",state:"@",relatedResources:"="},templateUrl:"components/fields/belongs-to/belongs-to.html",controller:["$scope",function(a){a.hasNested=function(){var b=a.field.views[a.state];return b&&b.nested}}]}}),angular.module("carnival.components.fields.boolean",[]).directive("carnivalBooleanField",function(){return{restrict:"E",replace:!0,scope:{data:"="},templateUrl:"components/fields/boolean/boolean.html",controller:["$scope",function(a){void 0===a.data&&(a.data=!1)}]}}),angular.module("carnival.components.fields.currency",[]).directive("carnivalCurrencyField",["$filter",function(a){return{restrict:"E",scope:{data:"=",field:"="},templateUrl:"components/fields/currency/currency.html"}}]).directive("currency",["$parse",function(a){return{restrict:"A",require:"?ngModel",link:function(a,b,c,d){function e(a){var b=a.replace(/^-/,"").replace(/^0*/,"");return b=b.replace(/[^0-9]/g,"")}function f(a,b){return e(parseFloat(a).toFixed(b))}function g(a){if(!a)return null;var b=a.replace(/[^\d]+/g,"");b=b.replace(/^[0]+([1-9])/,"$1");var c=n.apply(b);return a!==c&&(d.$setViewValue(c),d.$render()),c?parseInt(c.replace(/[^\d]+/g,""))/Math.pow(10,k):null}if(d){var h=a.field.options.decimalDelimiter||".",i=a.field.options.thousandsDelimiter||"",j=a.field.options.symbol||"$",k=parseInt(a.field.options.decimals,10);isNaN(k)&&(k=2);var l=k>0?h+new Array(k+1).join("0"):"",m=j+" #"+i+"##0"+l,n=new StringMask(m,{reverse:!0});d.$formatters.push(function(a){if(angular.isUndefined(a))return a;var b=f(a,k);return n.apply(b)}),d.$parsers.push(g)}}}}]),angular.module("carnival.components.fields.date",[]).directive("carnivalDateField",function(){return{restrict:"E",replace:!0,scope:{data:"="},templateUrl:"components/fields/date/date.html"}}),angular.module("carnival.components.fields.enum",[]).directive("carnivalEnumField",function(){return{restrict:"E",replace:!0,scope:{data:"=",field:"="},templateUrl:"components/fields/enum/enum.html"}}),angular.module("carnival.components.fields",["carnival.components.fields.number","carnival.components.fields.select","carnival.components.fields.belongsTo","carnival.components.fields.hasMany","carnival.components.fields.string","carnival.components.fields.text","carnival.components.fields.wysiwyg","carnival.components.fields.boolean","carnival.components.fields.date","carnival.components.fields.file","carnival.components.fields.enum","carnival.components.fields.currency"]),angular.module("carnival.components.fields.file",[]).directive("carnivalFileField",function(){return{restrict:"E",replace:!0,scope:{data:"=",field:"="},templateUrl:"components/fields/file/file.html",controller:["$scope","$http","Configuration",function(a,b,c){a.checkIfIsImage=function(a){return/\.(gif|jpg|jpeg|tiff|png)$/i.test(a)},a.checkIfHasUploader=function(){return"undefined"!=typeof a.field.uploader},a.checkIfHasGallery=function(){return"undefined"!=typeof a.field.gallery}}]}}),angular.module("carnival.components.fields.hasMany",[]).directive("carnivalHasManyField",function(){return{restrict:"E",replace:!0,scope:{datas:"=",field:"=",state:"@",parentEntity:"=",relatedResources:"="},templateUrl:"components/fields/has-many/has-many.html",controller:["$rootScope","$scope","utils","Configuration","$compile","$element","$document","$filter",function(a,b,c,d,e,f,g,h){var i=function(){b.utils=c};b.hasNested=function(){var a=b.field.views[b.state];return a&&a.nested},b.showOptions=function(){var a=d.getEntity(b.field.entityName),c=a.getFieldByEntityName(b.parentEntity.name);return!c||"belongsTo"!==c.type||b.field.views[b.state].showOptions},b.showAs=function(){return b.field.showAs};var j=function(a,b){for(var c=0;c<b.length;c++)if(b[c].id===a)return c;return-1},k=function(a){if(b.field.views[b.state].enableDelete){var c=d.getEntity(b.field.entityName);c["delete"](a).success(function(){var a=h("translate")("DELETED_SUCCESS_MESSAGE");new Notification(a,"warning")}).error(function(a){new Notification(a,"danger")})}};b.remove=function(a){var c=b.datas,d=j(a,c);0>d||(c.splice(d,1),k(a))},i()}]}}),angular.module("carnival.components.fields.number",[]).directive("carnivalNumberField",function(){return{restrict:"E",replace:!0,scope:{label:"=",data:"="},templateUrl:"components/fields/number/number.html"}}),angular.module("carnival.components.fields.select",[]).directive("carnivalSelectField",function(){return{restrict:"E",replace:!0,scope:{data:"=",items:"=",field:"=",identifier:"="},templateUrl:"components/fields/select/select.html"}}),angular.module("carnival.components.fields.string",[]).directive("carnivalStringField",function(){return{restrict:"E",replace:!0,scope:{label:"=",data:"="},templateUrl:"components/fields/string/string.html"}}),angular.module("carnival.components.fields.text",[]).directive("carnivalTextField",function(){return{restrict:"E",replace:!0,scope:{label:"=",data:"="},templateUrl:"components/fields/text/text.html"}}),angular.module("carnival.components.fields.wysiwyg",[]).directive("carnivalWysiwygField",function(){return{restrict:"E",replace:!0,scope:{label:"=",data:"="},templateUrl:"components/fields/wysiwyg/wysiwyg.html"}}),angular.module("carnival.components.form-area",[]).directive("carnivalFormArea",function(){return{restrict:"E",replace:!0,scope:{entity:"=",fields:"=",action:"=",state:"@state",type:"@",datas:"=",relatedResources:"=",editable:"="},templateUrl:"components/form-area/form-area.html",controller:["$rootScope","$scope","FormService",function(a,b,c){c.init(),b.getDisableClass=function(){return c.columnsCount()>0?"disable-form":""}}]}}),angular.module("carnival.components.form-column",[]).directive("carnivalFormColumn",function(){return{restrict:"E",replace:!0,scope:{entity:"=",field:"=",datas:"=",state:"@state",type:"@",index:"@"},templateUrl:"components/form-column/form-column.html",controller:["$rootScope","$scope","utils","FormService","$element","EntityResources","EntityUpdater","$timeout","$document",function(a,b,c,d,e,f,g,h,i){var j=function(){return b.type+"-"+b.entity.name};h(function(){i.scrollTop(0),b.cssClass="fadeInRight"},10),b.getDisableClass=function(){return d.columnsCount()>parseInt(b.index)+1?"disable-form":""},b.remove=function(){b.cssClass="fadeOutRight",h(function(){e.remove()},1e3)},b.isClosed=function(){return!d.columns[j()]},b.close=function(){d.closeColumn(j())},b.$watch("isClosed()",function(a,c){a!==c&&a&&b.remove()})}]}}),angular.module("carnival.components.form-fields-next",[]).directive("carnivalFormFieldsNext",function(){return{restrict:"E",replace:!0,templateUrl:"components/form-fields-next/form-fields-next.html"}}),angular.module("carnival.components.form-fields",[]).directive("carnivalFormFields",function(){return{restrict:"E",replace:!0,templateUrl:"components/form-fields/form-fields.html"}}),angular.module("carnival.components.form",[]).directive("carnivalForm",function(){return{restrict:"E",replace:!0,scope:{entity:"=",fields:"=",action:"=",state:"@state",type:"@",datas:"=",relatedResources:"="},templateUrl:"components/form/form.html",controller:["Notification","$document","$scope","utils","FormService","EntityResources","EntityUpdater","$state","$filter",function(a,b,c,d,e,f,g,h,i){c.hasRelatedFields=function(){for(var a=0;a<c.fields.length;a++){var b=c.fields[a];if("related"===b.fieldFormType)return!0}return!1},c.showRelatedFields=function(){return c.hasRelatedFields()?"create"!==c.state:!1},c.initSelectedTab=function(a){c.selectedTab||(c.selectedTab=a)},c.selectTab=function(a){c.selectedTab=a},c.getTabClass=function(a){return c.selectedTab===a?"active":void 0};var j=function(a){var b=c.entity.parentEntity,d=c.entity.identifier;if(c.entity[d]=a[d],c.entity.datas=a,b){var e=b.model.getFieldByEntityName(c.entity.name);g.updateEntity(b,e,a)}},k=function(a){var b=c.entity.parentEntity;c.entity=f.prepareForEditState(c.entity.name,b),c.entity.parentEntity=b,j(a)},l=function(d){var e=i("translate")("CREATE_RELATIONS_MESSAGE");e=c.entity.label+e,new a(e,"success"),"normal"===c.type?h.go("main.edit",{entity:c.entity.name,id:d.id}):c.state="edit",b.scrollTop(window.innerHeight,1e3)},m=function(b){if(c.errors=[],k(b),c.hasRelatedFields()&&"create"===c.state)l(b);else{e.goToNextStep(c.entity.name,c.type);var d=i("translate")("UPDATED_SUCCESS_MESSAGE");new a(d,"success")}},n=function(b,c){if(b){angular.isArray(c)||(c=[c]);for(var d=0;d<c.length;d++)new a(c[d],"alert")}else m(c)};c.saveButtonClass="nested"===c.type?"tiny button-submit":"small button-submit",c.buttonAction=function(){var a=n;c.action.click(a)}}]}}),angular.module("carnival.components.gallery",[]).directive("carnivalGallery",function(){return{restrict:"E",replace:!0,scope:{gallery:"=",fileUrl:"="},controller:["$scope","$injector",function(a,b){window.CARNIVAL||(window.CARNIVAL={}),window.CARNIVAL.gallery||(window.CARNIVAL.gallery={}),window.CARNIVAL.gallery.sendUrl=function(b){a.fileUrl=b,a.$parent.$parent.$apply()},a.open=function(){var c;c="function"==typeof a.gallery.url?a.gallery.url(b):a.gallery.url;var d="dialog";a.gallery.width&&(d+=",WIDTH="+a.gallery.width),a.gallery.height&&(d+=",HEIGHT="+a.gallery.height),window.open(c,"WINDOW_GALLERY",d)}}],templateUrl:"components/gallery/gallery.html"}}),angular.module("carnival.components.has-many-select",[]).directive("carnivalHasManySelect",function(){return{restrict:"E",replace:!0,scope:{datas:"=",field:"=",parentEntity:"=",relatedResources:"="},templateUrl:"components/has-many-select/has-many-select.html",controller:["$rootScope","$scope","utils","Configuration",function(a,b,c,d){var e=function(){b.datas||(b.datas=[])},f=function(a){b.datas||(b.datas=[]);for(var c=d.getEntity(b.field.entityName),e=c.identifier,f=0;f<b.datas.length;f++){var g=b.datas[f];if(a[e]===g[e])return!0}return!1};b.getAvailableResources=function(){var a=[];if(!b.relatedResources)return a;for(var c=0;c<b.relatedResources.length;c++){var d=b.relatedResources[c];f(d)||a.push(d)}return a};var g=function(){var a=b.getAvailableResources(),c=b.selectedHasMany;return c>=0?a[c]:void 0};b.addHasManyOption=function(){var a=g();a&&b.datas.push(a)},e()}]}}),angular.module("carnival.components.has-many-table",[]).directive("carnivalHasManyTable",function(){return{restrict:"E",replace:!0,scope:{parentEntity:"=",field:"=",datas:"=",hasNested:"=",state:"@",editable:"="},templateUrl:"components/has-many-table/has-many-table.html",controller:["$rootScope","$scope","$compile","utils","$element","FormService","Configuration","EntityResources",function(a,b,c,d,e,f,g,h){b.getListFields=function(){for(var a=[],c=0;c<b.entity.fields.length;c++){var d=b.entity.fields[c];"belongsTo"!==d.type&&"hasMany"!==d.type&&a.push(d)}return a};var i=function(){b.entity=h.prepareForListState(b.field.name,b.parentEntity)};i()}]}}),angular.module("carnival.components.listingextraaction",[]).directive("carnivalListingExtraAction",function(){return{restrict:"E",replace:!0,scope:{extraAction:"=",item:"="},templateUrl:"components/listing-extra-action/listing-extra-action.html",controller:["$scope","$stateParams","Configuration","$injector",function(a,b,c,d){var e=function(b){var c=/\/:([a-z]*)($ || \/)/,d=c.exec(b);if(null===d)return b;var e=d[1],f=a.item[e];return b.replace(c,"/"+f)},f=function(){for(var b=a.extraAction.url;b.indexOf("/:")>=0;)b=e(b);return b};a.getUrl=function(){return f()},a.getLabel=function(){return a.extraAction.label},a.executeAction=function(){a.extraAction.action(a.item,d)}}]}}),angular.module("carnival.components.listingfieldbelongsto",[]).directive("carnivalListingFieldBelongsTo",function(){return{restrict:"E",replace:!0,scope:{item:"=",field:"="},templateUrl:"components/listing-field-belongs-to/listing-field-belongs-to.html",controller:["$scope","$stateParams","Configuration",function(a,b,c){c.getEntity(b.entity);a.getUrl=function(){var b=a.item[a.field.name+"Url"];return b||(b="#/show/"+a.field.endpoint+"/"+a.item[a.field.name].id),b},a.getLabel=function(){return a.item[a.field.name][a.field.field]}}]}}),angular.module("carnival.components.listingfieldboolean",[]).directive("carnivalListingFieldBoolean",function(){return{restrict:"E",replace:!0,scope:{item:"=",field:"="},templateUrl:"components/listing-field-boolean/listing-field-boolean.html"}}),angular.module("carnival.components.listingFieldCurrency",[]).directive("carnivalListingFieldCurrency",function(){return{restrict:"E",scope:{item:"=",field:"="},templateUrl:"components/listing-field-currency/listing-field-currency.html",link:function(a){a.toCurrency=function(b){function c(a){var b=a.replace(/^-/,"").replace(/^0*/,"");return b=b.replace(/[^0-9]/g,"")}function d(a,b){return c(parseFloat(a).toFixed(b))}var e=a.field.options.decimalDelimiter||".",f=a.field.options.thousandsDelimiter||"",g=a.field.options.symbol||"$",h=parseInt(a.field.options.decimals,10);isNaN(h)&&(h=2);var i=h>0?e+new Array(h+1).join("0"):"",j=g+" #"+f+"##0"+i,k=new StringMask(j,{reverse:!0}),l=d(b,h);return k.apply(l)}}}}),angular.module("carnival.components.listingFieldDate",[]).directive("carnivalListingFieldDate",["$filter",function(a){return{restrict:"E",scope:{item:"=",field:"="},templateUrl:"components/listing-field-date/listing-field-date.html",link:function(b){b.toDate=function(b){var c=new Date(b);return a("date")(c,"dd/MM/yyyy HH:mm:ss")}}}}]),angular.module("carnival.components.listingFieldEnum",[]).directive("carnivalListingFieldEnum",function(){return{restrict:"E",scope:{item:"=",field:"="},templateUrl:"components/listing-field-enum/listing-field-enum.html",link:function(a,b,c){a.getValue=function(b){for(var c=0,d=a.field.values.length;d>c;c+=1)if(a.field.values[c].value===b)return a.field.values[c].label}}}}),angular.module("carnival.components.listingFieldFile",[]).directive("carnivalListingFieldFile",function(){return{restrict:"E",replace:!0,scope:{item:"=",field:"="},templateUrl:"components/listing-field-file/listing-field-file.html",controller:["$scope",function(a){a.checkIfIsImage=function(a){return/\.(gif|jpg|jpeg|tiff|png)$/i.test(a)}}]}}),angular.module("carnival.components.listingfieldhasmany",[]).directive("carnivalListingFieldHasMany",function(){return{restrict:"E",replace:!0,scope:{item:"=",field:"="},templateUrl:"components/listing-field-has-many/listing-field-has-many.html",controller:["$scope","$stateParams","Configuration","urlParams",function(a,b,c,d){var e=c.getEntity(b.entity),f=function(a){for(var b=0;b<a.length;b++){var c=a[b];if(("belongsTo"===c.type||"hasMany"===c.type)&&c.entityName===e.name)return c}return null};a.getUrl=function(){var b=c.getEntity(a.field.entityName),d=f(b.fields);return"#/list/"+a.field.endpoint+"?page=1&search."+d.foreignKey+"="+a.item[e.identifier]}}]}}),angular.module("carnival.components.listingfield",[]).directive("carnivalListingField",function(){return{restrict:"E",replace:!0,scope:{item:"=",field:"="},templateUrl:"components/listing-field/listing-field.html"}}),angular.module("carnival.components.listing",[]).directive("carnivalListing",function(){return{restrict:"E",replace:!0,scope:{fields:"=",datas:"=",actions:"=",extraActions:"=",identifier:"=",entityName:"="},templateUrl:"components/listing/listing.html"}}),angular.module("carnival.components.navbar",[]).directive("carnivalNavbar",function(){return{restrict:"E",replace:!0,scope:{appName:"=",menuItems:"="},templateUrl:"components/navbar/navbar.html",controller:["$scope","$state","$stateParams","urlParams","$location",function(a,b,c,d,e){var f="#";e.$$html5&&(f=""),a.buildUrl=function(a){return"entity"===a.type?f+"/list/"+a.url:"state"===a.type?f+"/"+a.url:"url"===a.type?a.url:"#"},a.checkSelEntity=function(d){var e=b.current.url.replace(":entity",c.entity);return e.indexOf(a.menuItems[d].link.url)>-1}}]}}),angular.module("carnival.components.nested-form",[]).directive("carnivalNestedForm",function(){return{restrict:"E",replace:!0,scope:{entity:"=",state:"@",editable:"="},templateUrl:"components/nested-form/nested-form.html",controller:["$rootScope","$scope","utils","$element","FormService",function(a,b,c,d,e){b.isClosed=function(){return!e.nesteds[b.entity.name]},b.close=function(){e.closeNested(b.entity.name)},b.$watch("isClosed()",function(a,b){a!==b&&a&&d.remove()})}]}}),angular.module("carnival.components.notification",[]).directive("carnivalNotification",function(){return{restrict:"E",replace:!0,scope:{},templateUrl:"components/notification/notification.html",controller:["$scope","notificationFactory",function(a,b){a.notifications=b}]}}),angular.module("carnival.components.order-controller",[]).directive("carnivalOrderCtrl",function(){return{restrict:"E",replate:!0,scope:{field:"="},templateUrl:"components/order-controller/order-controller.html",controller:["$scope","urlParams",function(a,b){a.toggleOrder=function(){var c=b.getParam("order")!==a.field?"asc":"asc"===b.getParam("orderDir")&&b.getParam("order")===a.field?"desc":"asc";b.setParam("order",a.field),b.setParam("orderDir",c),b.reload()},a.checkDirAsc=function(){return b.getParam("order")===a.field&&"asc"===b.getParam("orderDir")}}]}}),angular.module("carnival.components.pagination-controller",[]).directive("carnivalPaginationCtrl",function(){return{restrict:"E",replace:!0,scope:{currentPage:"=",totalPages:"="},templateUrl:"components/pagination-controller/pagination-controller.html",controller:["$scope","$rootScope","urlParams",function(a,b,c){a.jumpTo=function(a){c.setParam("page",a,!0)},a.nextPage=function(){a.currentPage!==a.totalPages&&c.setParam("page",a.currentPage+1,!0)},a.prevPage=function(){1!==a.currentPage&&c.setParam("page",a.currentPage-1,!0)},b.$on("paramsChange",function(){a.currentPage=parseInt(c.getParam("page"),10)})}]}}),angular.module("carnival.components.quickfilter-controller",[]).directive("carnivalQuickFilter",function(){return{restrict:"E",replace:!0,scope:{filters:"="},templateUrl:"components/quickfilter-controller/quickfilter-controller.html",controller:["$scope","urlParams",function(a,b){a.isSelected=function(a,c){return c===b.getParam("search."+a)},a.setFilter=function(a,c){b.setParam("search."+a,c,!0)}}]}}),angular.module("carnival.components.search-controller",[]).directive("carnivalSearchCtrl",function(){return{restrict:"E",replace:!0,scope:{fields:"=",relatedResources:"="},templateUrl:"components/search-controller/search-controller.html",controller:["$scope","urlParams",function(a,b){var c=function(){a.searchParams={};for(var c=0,d=a.fields.length;d>c;c+=1){var e=a.fields[c].name;"belongsTo"===a.fields[c].type&&(e=a.fields[c].foreignKey),a.searchParams[e]=b.getParam("search."+e)}};a.submit=function(){for(var c=Object.keys(a.searchParams),d=0,e=c.length;e>d;d+=1)b.setParam("search."+c[d],a.searchParams[c[d]]);b.emitLoadEvent()},c()}]}}),angular.module("carnival.components.showBoolean",[]).directive("carnivalShowBoolean",function(){return{restrict:"E",replace:!0,scope:{data:"="},templateUrl:"components/show-fields/boolean/boolean.html"}}),angular.module("carnival.components.showCurrency",[]).directive("carnivalShowCurrency",["$filter",function(a){return{restrict:"E",scope:{data:"=",field:"="},templateUrl:"components/show-fields/currency/currency.html",link:function(a){a.toCurrency=function(b){function c(a){var b=a.replace(/^-/,"").replace(/^0*/,"");return b=b.replace(/[^0-9]/g,"")}function d(a,b){return c(parseFloat(a).toFixed(b))}var e=a.field.options.decimalDelimiter||".",f=a.field.options.thousandsDelimiter||"",g=a.field.options.symbol||"$",h=parseInt(a.field.options.decimals,10);isNaN(h)&&(h=2);var i=h>0?e+new Array(h+1).join("0"):"",j=g+" #"+f+"##0"+i,k=new StringMask(j,{reverse:!0}),l=d(b,h);return k.apply(l)}}}}]),angular.module("carnival.components.showDate",[]).directive("carnivalShowDate",["$filter",function(a){return{restrict:"E",replace:!0,scope:{data:"="},templateUrl:"components/show-fields/date/date.html",link:function(b){b.toDate=function(b){var c=new Date(b);return a("date")(c,"dd/MM/yyyy HH:mm:ss")}}}}]),angular.module("carnival.components.showEnum",[]).directive("carnivalShowEnum",function(){return{restrict:"E",replace:!0,scope:{data:"=",field:"="},templateUrl:"components/show-fields/enum/enum.html",link:function(a){a.getValue=function(b){for(var c=0,d=a.field.values.length;d>c;c+=1)if(a.field.values[c].value===b)return a.field.values[c].label}}}}),angular.module("carnival.components.showFile",[]).directive("carnivalShowFile",function(){return{restrict:"E",replace:!0,scope:{data:"="},templateUrl:"components/show-fields/file/file.html",controller:["$scope","$http","Configuration",function(a,b,c){a.checkIfIsImage=function(a){return/\.(gif|jpg|jpeg|tiff|png)$/i.test(a)}}]}}),angular.module("carnival.components.showHasMany",[]).directive("carnivalShowHasMany",function(){return{restrict:"E",replace:!0,scope:{data:"=",field:"="},templateUrl:"components/show-fields/has-many/has-many.html"}}),angular.module("carnival.components.show-fields",[]).directive("carnivalShowFields",function(){return{restrict:"E",replace:!0,templateUrl:"components/show-fields/show-fields.html"}}),angular.module("carnival.components.showString",[]).directive("carnivalShowString",function(){return{restrict:"E",replace:!0,scope:{data:"="},templateUrl:"components/show-fields/string/string.html"}}),angular.module("carnival.components.showWysiwyg",[]).directive("carnivalShowWysiwyg",function(){return{restrict:"E",replace:!0,scope:{data:"="},templateUrl:"components/show-fields/wysiwyg/wysiwyg.html"}}),angular.module("carnival.components.summarized-items",[]).directive("carnivalSummarizedItems",function(){return{restrict:"E",replace:!0,scope:{parentEntity:"=",field:"=",datas:"=",state:"@",editable:"="},templateUrl:"components/summarized-items/summarized-items.html",controller:["$rootScope","$scope","$compile","utils","$element","FormService","Configuration","EntityResources",function(a,b,c,d,e,f,g,h){b.openItems=function(){var a=h.prepareForListState(b.field.name,b.parentEntity),c=b.$new();c.entity=a,f.openColumnListing("list","#form-columns",c)}}]}}),angular.module("carnival.components.uploader",[]).directive("carnivalUploader",function(){return{restrict:"E",replace:!0,scope:{uploader:"=",fileUrl:"="},templateUrl:"components/uploader/uploader.html",controller:["$scope","$http","Uploader","Notification","Configuration","$filter",function(a,b,c,d,e,f){var g=function(){if(a.uploader.endpoint&&a.uploader.endpointUrl)throw"Set only one type of endpoint for the uploader";return a.uploader.endpoint?e.getBaseApiUrl()+"/"+a.uploader.endpoint:a.uploader.endpointUrl};a.upload=function(){c.upload(g(),a.files[0]).success(function(b){var c=f("translate")("UPLOADED_SUCCESS_MESSAGE");new d(c,"warning"),a.fileUrl=a.uploader.getUrl(b)}).error(function(a){new d(a,"warning")})}}]}}).directive("fileInput",["$parse",function(a){return{restrict:"A",link:function(b,c,d){c.bind("change",function(){a(d.fileInput).assign(b,c[0].files),b.$apply()})}}}]),angular.module("carnival").provider("Configuration",["$stateProvider",function(a){var b=null,c=null,d=!1,e=[],f=[],g=[],h={};return{setBaseApiUrl:function(a){a.replace(/\/$/,""),c=a},setAppName:function(a){b=a},validateEntities:function(a){a&&(d=!0)},setEntities:function(a){a=a},addEntity:function(a,b){e.push({name:a,options:b})},addNavbarItem:function(a){f.push(a)},addState:function(a){g.push(a)},initialPage:function(a){h=a},$get:function(){return{entities:e,validateEntities:d,getBaseApiUrl:function(){return c},getAppName:function(){return b},getEntity:function(a){for(var b=0,c=e.length;c>b;b+=1)if(e[b].name===a)return e[b];return"Entity not found!"},getEntities:function(){return e},addExtraStates:function(){for(var b=0;b<g.length;b++){var c=g[b];a.state("main."+c.name,{url:c.url,templateUrl:c.templateUrl,controller:c.controller})}},getNavbarItems:function(){return f},getInitialPage:function(){return h}}}}}]),angular.module("carnival").constant("translation",{CREATE_STATE_TITLE:"Create",EDIT_STATE_TITLE:"Edit",LIST_STATE_TITLE:"List",SHOW_STATE_TITLE:"Show",LIST_STATE_BUTTON_CREATE:"Create",DELETE_BUTTON_DELETE:"Delete",DELETE_BUTTON_CANCEL:"Cancel",DELETE_BUTTON_CONFIRM:"Confirm",FORM_BUTTON_SAVE:"Save",GALLERY_BUTTON_OPEN:"Open Gallery",LISTING_ACTIONS:"Actions",LISTING_EXTRA_ACTIONS:"Extra Actions",LISTING_BUTTON_SHOW:"Show",LISTING_BUTTON_EDIT:"Edit",LISTING_HAS_MANY_PREFIX:"View",NESTED_FORM_BUTTON_CREATE:"Create",NESTED_FORM_TITLE_CREATE:"Create",SEARCH_FORM_TITLE:"Search",ARE_YOU_SURE:"Are you Sure",SEARCH_FORM_SUBMIT:"Submit",UPLOAD_BUTTON:"Upload",FORM_BUTTON_EDIT:"Edit"}),angular.module("carnival").factory("Entity",["EntityValidation","$http","Configuration","RequestBuilder","FieldBuilder",function(a,b,c,d,e){function f(b,d){c.validateEntities&&a(b,d),this.name=b,this.endpoint=d.endpoint||this.name,this.label=d.label||this.name,this.identifier=d.identifier,this.extraReqParams=d.extraReqParams||{},this.quickFilters=d.quickFilters||null,this.pagination=d.pagination||null,this.defaultSort=d.defaultSort||null,this.fields=[],g(d.fields,this),h(d.extraActions,this)}var g=function(a,b){var c=[];Object.keys(a).forEach(function(b){var d=e.build(b,a[b]);c.push(d)}),b.fields=c},h=function(a,b){if(b.extraActions=[],a)for(var c in a){var d={name:c,url:a[c].url,action:a[c].action,label:a[c].label};b.extraActions.push(d)}};return f.prototype.checkFieldView=function(a,b){for(var c=0,d=this.fields.length;d>c;c+=1)if(this.fields[c].name===a)return this.fields[c].views[b]&&this.fields[c].views[b].enable;return!1},f.prototype.getFieldByEntityName=function(a){for(var b=0;b<this.fields.length;b++)if(this.fields[b].entityName===a)return this.fields[b]},f.prototype.getList=function(a,b,e,f,g){var h=this.extraReqParams.list||{},i=d.buildForGetList({baseUrl:c.getBaseApiUrl(),extraParams:h,offset:a,entity:this,limit:b,order:e,orderDir:f,search:g,endpoint:this.endpoint});return this.request(i)},f.prototype.getOne=function(a){var b=this.extraReqParams.show||{},e=d.buildForGetOne({baseUrl:c.getBaseApiUrl(),extraParams:b,id:a,endpoint:this.endpoint});return this.request(e)},f.prototype["delete"]=function(a){var b=this.extraReqParams["delete"]||{},e=d.buildForDelete({baseUrl:c.getBaseApiUrl(),extraParams:b,id:a,endpoint:this.endpoint});return this.request(e)},f.prototype.create=function(a){
var b=this.extraReqParams.create||{},e=d.buildForCreate({baseUrl:c.getBaseApiUrl(),extraParams:b,entity:this,entityData:a,endpoint:this.endpoint});return this.request(e)},f.prototype.update=function(a,b){var e=this.extraReqParams.update||{},f=d.buildForUpdate({baseUrl:c.getBaseApiUrl(),extraParams:e,id:a,entity:this,entityData:b,endpoint:this.endpoint});return this.request(f)},f.prototype.request=function(a){return b(a)},f}]),angular.module("carnival").factory("EntityValidation",function(){var a=function(a,b){if(!a)throw"You must set a name for your entity";if(!b.identifier)throw"You must set an identifier for the entity "+a;if(!b.fields)throw"You must set the fields for the entity "+this.name};return a}),angular.module("carnival").service("ActionFactory",["Notification","$state","ParametersParser","EntityUpdater","$filter",function(a,b,c,d,e){this.buildCreateFunction=function(a,d,e){return function(d){a.model.create(c.parse(a.datas,a)).success(function(c,e){d?d(!1,c):b.go("main.list",{entity:a.model.name})}).error(function(a){d&&d(!0,a)})}},this.buildEditFunction=function(a){return function(d){a.model.update(a.id,c.parse(a.datas,a)).success(function(){d?d(!1,a.datas):b.go("main.show",{entity:a.model.name,id:a.id})}).error(function(a){d(!0,a)})}},this.buildShowFunction=function(a){return function(){b.go("main.edit",{entity:a.model.name,id:a.id})}},this.buildListFunction=function(c){var d=function(){b.go("main.create",{entity:c.name})},f=function(a){b.go("main.edit",{entity:c.name,id:a})},g=function(a){b.go("main.show",{entity:c.name,id:a})},h=function(d){c.model["delete"](d).success(function(){var c=e("translate")("DELETED_SUCCESS_MESSAGE");new a(c,"warning"),b.reload()}).error(function(b){new a(b,"danger")})};return{create:d,edit:f,show:g,"delete":h}},this.buildAction=function(a,b,c){switch(b){case"create":return{name:"action",value:{label:"Save",click:this.buildCreateFunction(a,Object.keys(a.nestedForms).length>0,c)}};case"edit":return{name:"action",value:{label:"Save",click:this.buildEditFunction(a)}};case"show":return{name:"action",value:{label:"Edit",click:this.buildShowFunction(a)}};case"index":return{name:"actions",value:this.buildListFunction(a)};default:return{}}}}]),angular.module("carnival").service("FieldBuilder",function(){var a=function(a){var b={};return Object.keys(a).forEach(function(c){var d=a[c];b[c]={enable:d.enable,searchable:"boolean"==typeof d.searchable?d.searchable:!0,showOptions:d.showOptions||!1,enableDelete:d.enableDelete||!1,nested:d.nested||!1,showAs:d.showAs,sortable:"boolean"==typeof d.sortable?d.sortable:!0}}),b},b=function(a){return a.charAt(0).toUpperCase()+a.substring(1)},c=function(a){return"belongsTo"===a.type||"hasMany"===a.type?a.foreignKey?a.foreignKey:a.identifier?a.name+b(a.identifier):a.name:void 0},d=function(a){var b=a.split(" "),c="row"===b[0];"row"===b[0]&&b.splice(0,1);var d=b[0].split("-"),e="column"===d[0]?d[1]:"12";return{newRow:c,columnSize:e}},e=function(a){return"hasMany"===a.type?"related":"simple"};this.build=function(b,f){var g={name:b,label:f.label||b,foreignKey:f.foreignKey,endpoint:f.endpoint||b,field:f.field,identifier:f.identifier||"id",entityName:f.entityName||b,type:f.type,uploader:f.uploader,gallery:f.gallery,showAs:f.showAs||"table",values:f.values,grid:d(f.grid||"row column-12"),options:f.options,views:a(f.views)};return g.fieldFormType=e(g),g.foreignKey=c(g),g}}),angular.module("carnival").service("EntityResources",["Configuration","ActionFactory",function(a,b){var c=this,d=function(a,b,c){c.views[b]&&c.views[b].nested&&(a.nestedForms[c.endpoint]=l(c.endpoint,"create",a),a.nestedForms[c.endpoint].parentEntity=a)},e=function(b,c){var d,e=a.getEntity(c),f=null;e.defaultSort&&(d=e.defaultSort.field,f=e.defaultSort.dir),e.getList(null,null,d,f).success(function(a,d,e,f){b.relatedResources[c]=a})},f=function(a,b){return("edit"===a||"create"===a||"index"===a)&&g(b)},g=function(a){return"belongsTo"===a||"hasMany"===a},h=function(a,b){return a?b.entityName===a.name?!0:h(a.parentEntity,b):!1},i=function(a,b,g,i){a.model.checkFieldView(g.name,b)&&(g.entityName&&g.entityName===c.entityName||h(i,g)||(a.fields.unshift(g),f(b,g.type)&&(e(a,g.endpoint),d(a,b,g))))},j=function(a,b,c){a.relatedResources={};for(var d=a.model.fields.length-1;d>=0;d-=1){var e=a.model.fields[d];i(a,b,e,c)}},k=function(a,c,d){var e=b.buildAction(a,c,d);a[e.name]=e.value},l=function(b,c,d){var e={};return e.nestedForms={},e.parentEntity=d,e.model=a.getEntity(b),e.name=e.model.name,e.label=e.model.label,e.identifier=e.model.identifier,e.fields=[],e.extraActions=e.model.extraActions,e.defaultSort=e.model.defaultSort,e.datas={},j(e,c,d),k(e,c,d),e};this.prepareForState=function(a,b,c){return this.entityName=a,l(a,b,c)},this.prepareForCreateState=function(a,b){return this.prepareForState(a,"create",b)},this.prepareForEditState=function(a,b){return this.prepareForState(a,"edit",b)},this.prepareForShowState=function(a){return this.prepareForState(a,"show")},this.prepareForListState=function(a,b){return this.prepareForState(a,"index",b)}}]),angular.module("carnival").service("EntityUpdater",function(){var a=function(a,b,c){for(var d=a.datas[b.name],e=0;e<d.length;e++){var f=d[e];if(f[b.identifier]===c[b.identifier])return!0}return!1},b=function(a,b,c){d(a,b,c,a.datas[b.name])},c=function(a,b,c){d(a,b,c,a.relatedResources[b.endpoint])},d=function(a,b,c,d){for(var e=0;e<d.length;e++){var f=d[e];if(f[b.identifier]===c[b.identifier]){for(var g in f)f[g]=c[g];break}}},e=function(d,e,f){var g=d.datas[e.name];a(d,e,f)?(b(d,e,f),c(d,e,f)):(g.push(f),d.relatedResources[e.endpoint].push(f))};this.updateEntity=function(a,b,c){"belongsTo"===b.type?(a.datas[b.name]=c,a.relatedResources[b.endpoint].push(c)):"hasMany"===b.type&&(a.datas[b.name]||(a.datas[b.name]=[]),e(a,b,c))}}),angular.module("carnival").service("FormService",["Configuration","ActionFactory","$document","$compile","$timeout","$state",function(a,b,c,d,e,f){this.nesteds={},this.init=function(a){this.entity=a,this.nesteds={},this.columns={}},this.columnsCount=function(){return Object.keys(this.columns).length},this._addNested=function(a,b,c){var e=d(c)(b),f=document.querySelector(a);angular.element(f).append(e)},this._addColumn=function(a,b,c,d){this.columns[b]||(this.columns[b]={});var e=this;e._addNested(c,d,a)},this.goToNextStep=function(a,b){"column"===b?this.closeColumn("form-"+a):"nested"===b?this.closeNested(a):f.go("main.list",{entity:a})},this.openColumn=function(a,b,c){var d="form-"+c.entity.name,e=this.columnsCount()||0,f='<carnival-form-column index="'+e+'" type="form" entity="entity" state="'+a+'"></carnival-form-column>';this._addColumn(f,d,b,c)},this.openColumnListing=function(a,b,c){var d="table-"+c.entity.name,e=this.columnsCount()||0,f='<carnival-form-column index="'+e+'" type="table" field="field" entity="entity" datas="datas"></carnival-form-column>';this._addColumn(f,d,b,c)},this.openNested=function(a,b,c){if(this.isNestedOpen(c.entity.name)){var d=this;return this.closeNested(c.entity.name),void e(function(){d.openNested(a,b,c)},200)}this.nesteds[c.entity.name]||(this.nesteds[c.entity.name]={});var f=(this.nesteds[c.entity.name],'<carnival-nested-form state="'+a+'" type="nested" entity="entity"></carnival-nested-form></div>');this._addNested(b,c,f)},this.isNestedOpen=function(a){return!!this.nesteds[a]},this.closeColumn=function(a){delete this.columns[a]},this.closeNested=function(a){delete this.nesteds[a]}}]),angular.module("carnival").provider("HttpAdapter",function(){var a={getList:null};return{getList:function(b){a.getList=b},getOne:function(b){a.getOne=b},$get:function(){return a}}}),angular.module("carnival").factory("notificationFactory",function(){var a=[];return a}),angular.module("carnival").service("Notification",["$timeout","notificationFactory",function(a,b){function c(c,e,f){f||(f={}),this.message=c,this.type=e;var g=f.timeout||3e3,h=f.callback;b.unshift(this),a(function(){d(),h&&h()},g)}var d=function(){b.splice(b.length-1,1)};return c}]),angular.module("carnival").service("RequestBuilder",["HttpAdapter",function(a){var b=function(a,b){var d={};return d.params={},d.method=a,c(d,b.extraParams),d},c=function(a,b){if(b)for(var c in b)a.params[c]=b[c]};this.buildForGetList=function(a){var c=b("GET",a);return c.url=a.baseUrl+"/"+a.endpoint,a.offset&&(c.params.offset=a.offset),a.limit&&(c.params.limit=a.limit),a.order&&a.orderDir&&(c.params.order=a.order,c.params.orderDir=a.orderDir),a.search&&(c.params.search=encodeURIComponent(JSON.stringify(a.search))),c},this.buildForGetOne=function(a){var c=b("GET",a);return c.url=a.baseUrl+"/"+a.endpoint+"/"+a.id,c},this.buildForDelete=function(a){var c=b("DELETE",a);return c.url=a.baseUrl+"/"+a.endpoint+"/"+a.id,c},this.buildForCreate=function(a){var c=b("POST",a);return c.url=a.baseUrl+"/"+a.endpoint,c.data=a.entityData,c},this.buildForUpdate=function(a){var c=b("PUT",a);return c.url=a.baseUrl+"/"+a.endpoint+"/"+a.id,c.data=a.entityData,c}}]),angular.module("carnival").service("ParametersParser",function(){var a=function(a,b){for(var c=0;c<b.length;c++){var d=b[c];if(d.name===a)return d}return null},b=function(a,b){for(var c=0;c<b.length;c++){var d=b[c];if(d.entityName===a)return d}return null},c=function(a,b){for(var c=[],d=0;d<b.length;d++){var e=b[d];c.push(e[a.identifier])}return c},d=function(a){var d={},e=a.parentEntity;if(!e)return d;var f=b(e.name,a.fields);return f?("hasMany"===f.type?d[f.name]=c(f,[e.datas]):"belongsTo"===f.type&&(d[f.foreignKey]=e.datas[f.identifier]),d):{}};this.parse=function(b,e){var f={};for(var g in b){var h=a(g,e.fields);h&&"hasMany"==h.type?f[g]=c(h,b[g]):f[g]=b[g]}var i=d(e);return angular.extend(f,i)}}),angular.module("carnival").constant("defaultTranslations",{YES:"Yes",NO:"No",CREATE_STATE_TITLE:"Create",EDIT_STATE_TITLE:"Edit",LIST_STATE_TITLE:"List",ARE_YOU_SURE:"Are you Sure?",ARE_YOU_SURE_DELETE:"Are you sure you want to delete?",SHOW_STATE_TITLE:"Show",LIST_STATE_BUTTON_CREATE:"Create",DELETE_BUTTON_DELETE:"Delete",DELETE_BUTTON_CANCEL:"Cancel",DELETE_BUTTON_CONFIRM:"Confirm",FORM_BUTTON_SAVE:"Save",GALLERY_BUTTON_OPEN:"Open Gallery",LISTING_ACTIONS:"Actions",LISTING_EXTRA_ACTIONS:"Extra Actions",LISTING_BUTTON_SHOW:"Show",LISTING_BUTTON_EDIT:"Edit",LISTING_HAS_MANY_PREFIX:"View",NESTED_FORM_BUTTON_CREATE:"Create",NESTED_FORM_TITLE_CREATE:"Create",SEARCH_FORM_TITLE:"Search",SEARCH_FORM_SUBMIT:"Submit",UPLOAD_BUTTON:"Upload",CREATED_SUCCESS_MESSAGE:"Item created with success!",DELETED_SUCCESS_MESSAGE:"Item deleted with success!",UPDATED_SUCCESS_MESSAGE:"Item updated with success!",UPLOADED_SUCCESS_MESSAGE:"Item uploaded with success!",CREATE_RELATIONS_MESSAGE:" created. Now you can create the relation(s)"}),angular.module("carnival").filter("translate",["Translation",function(a){return function(b){return a.table&&a.table[b]?a.table[b]:a.defaults[b]||b}}]),angular.module("carnival").provider("Translation",["defaultTranslations",function(a){var b,c=a;return{setTranslation:function(a){b=a},$get:function(){return{defaults:c,table:b}}}}]),angular.module("carnival").service("Uploader",["$http","Configuration",function(a,b){var c=function(b,c){var d=new FormData;return d.append("file",c),a.post(b,d,{transformRequest:angular.identity,headers:{"Content-Type":void 0}})};return{upload:c}}]),angular.module("carnival").service("urlParams",["$rootScope","$location","$state",function(a,b,c){this.defaultParams={page:1},this.setParam=function(a,c,d){""===c&&(c=null),c instanceof Date&&(c=c.toISOString()),b.search(a,c),d&&this.emitLoadEvent()},this.getParam=function(a){var c=b.search()[a];return!isNaN(parseInt(c))&&isFinite(c)?parseInt(c,10):c||this.defaultParams[a]},this.getAllParams=function(){return b.search()},this.clearParams=function(){Object.keys(b.search()).forEach(function(a){b.search(a,null)})},this.emitLoadEvent=function(){a.$broadcast("paramsChange")},this.reload=this.emitLoadEvent}]),angular.module("carnival").service("utils",function(){var a=function(a,b){if(!b)return a;if(!a)throw"cutString: to cut a string you must pass a string!";return a.length<=b?a:"string"!=typeof a?a:a=a.substr(0,b-1)+"..."};return{cutString:a}}),angular.module("carnival").controller("CreateController",["$scope","$stateParams","$state","Configuration","Notification","EntityResources",function(a,b,c,d,e,f){var g=a.entity={},h=function(){a.entity=f.prepareForCreateState(b.entity),g=a.entity};h()}]),angular.module("carnival").controller("EditController",["$rootScope","$scope","$stateParams","$state","Configuration","EntityResources",function(a,b,c,d,e,f){var g=b.entity={},h=function(){b.entity=g=f.prepareForEditState(c.entity),g.model.getOne(c.id).success(function(a){g.id=c.id,g.datas=a})};b.show=function(){return document.getElementsByClassName("form-column").length>1};var i=function(){return 10*(document.getElementsByClassName("form-column").length-1)+3},j=function(){return document.querySelector("#master-form").offsetHeight};b.getStyle=function(){return{zIndex:i(),height:j()+"px"}},h()}]),angular.module("carnival").controller("ListController",["$rootScope","$scope","$stateParams","$state","Configuration","Notification","urlParams","EntityResources","$filter",function(a,b,c,d,e,f,g,h,i){var j=b.entity={},k=b.pages={current:parseInt(g.getParam("page"),10)},l=function(){d.go("main.create",{entity:j.name})},m=function(a){d.go("main.edit",{entity:j.name,id:a})},n=function(a){d.go("main.show",{entity:j.name,id:a})},o=function(a){j.model["delete"](a).success(function(){var a=i("translate")("DELETED_SUCCESS_MESSAGE");new f(a,"warning"),d.reload()}).error(function(a){new f(a,"danger")})},p=function(){for(var a={},b=0,c=j.fields.length;c>b;b+=1){var d=j.fields[b].name;"belongsTo"===j.fields[b].type&&(d=j.fields[b].foreignKey),a[d]=g.getParam("search."+d)}return 0===Object.keys(a).length?!1:a},q=function(){j=h.prepareForListState(c.entity),j.loadData=function(){var a=k.perPage*(g.getParam("page")-1),b=k.perPage,c=g.getParam("order"),d=g.getParam("orderDir");c||d||!j.defaultSort||(c=j.defaultSort.field,d=j.defaultSort.dir),j.model.getList(a,b,c,d,p()).success(function(a,b,c,d){k.total=Math.ceil(c("X-Total-Count")/k.perPage),j.datas=a})},b.entity=j,k.perPage=j.model.pagination,j.actions={create:l,edit:m,show:n,"delete":o},j.loadData()};a.$on("paramsChange",function(){j.loadData()}),q()}]),angular.module("carnival").controller("ShowController",["$scope","$stateParams","$state","Configuration","EntityResources",function(a,b,c,d,e){var f=a.entity={};a.buttonAction=function(){c.go("main.edit",{entity:f.name,id:f.datas.id})},a.getValue=function(a,b){for(var c=0,d=b.values.length;d>c;c+=1)if(b.values[c].value===a)return b.values[c].label};var g=function(){f=a.entity=e.prepareForShowState(b.entity),f.model.getOne(b.id).success(function(a){f.datas=a})};g()}]),angular.module("carnival").controller("MainController",["$scope","$state","$rootScope","Configuration",function(a,b,c,d){var e=(a.app_name=d.getAppName(),a.menu_items=d.getNavbarItems()),f=function(){for(var a=0,b=e.length;b>a;a+=1)if("entity"===e[a].link.type)return e[a];return!1},g=function(){var a=d.getInitialPage();return(!a||Object.keys(a).length<=0)&&(a={type:f().link.type,entity:f().link.url}),a?"entity"===a.type?void b.go("main.list",{entity:a.entity}):"state"===a.type?void b.go("main."+a.state.name,a.state.options):void 0:void 0};c.$on("$stateChangeSuccess",function(){"main"===b.current.name&&g()}),c.$broadcast("$stateChangeSuccess")}]),angular.module("carnival.templates",["components/button/button.html","components/column-form/column-form.html","components/column-listing/column-listing.html","components/delete-button/delete-button.html","components/field-form-builder/field-form-builder.html","components/fields/belongs-to/belongs-to.html","components/fields/boolean/boolean.html","components/fields/currency/currency.html","components/fields/date/date.html","components/fields/enum/enum.html","components/fields/file/file.html","components/fields/has-many/has-many.html","components/fields/number/number.html","components/fields/select/select.html","components/fields/string/string.html","components/fields/text/text.html","components/fields/wysiwyg/wysiwyg.html","components/form-area/form-area.html","components/form-column/form-column.html","components/form-fields-next/form-fields-next.html","components/form-fields/form-fields.html","components/form/form.html","components/gallery/gallery.html","components/has-many-select/has-many-select.html","components/has-many-table/has-many-table.html","components/listing-extra-action/listing-extra-action.html","components/listing-field-belongs-to/listing-field-belongs-to.html","components/listing-field-boolean/listing-field-boolean.html","components/listing-field-currency/listing-field-currency.html","components/listing-field-date/listing-field-date.html","components/listing-field-enum/listing-field-enum.html","components/listing-field-file/listing-field-file.html","components/listing-field-has-many/listing-field-has-many.html","components/listing-field/listing-field.html","components/listing/listing.html","components/navbar/navbar.html","components/nested-form/nested-form.html","components/notification/notification.html","components/order-controller/order-controller.html","components/pagination-controller/pagination-controller.html","components/quickfilter-controller/quickfilter-controller.html","components/search-controller/search-controller.html","components/show-fields/boolean/boolean.html","components/show-fields/currency/currency.html","components/show-fields/date/date.html","components/show-fields/enum/enum.html","components/show-fields/file/file.html","components/show-fields/has-many/has-many.html","components/show-fields/show-fields.html","components/show-fields/string/string.html","components/show-fields/wysiwyg/wysiwyg.html","components/summarized-items/summarized-items.html","components/uploader/uploader.html","states/main.create/create.html","states/main.edit/edit.html","states/main.list/list.html","states/main.show/show.html","states/main/main.html"]),angular.module("components/button/button.html",[]).run(["$templateCache",function(a){a.put("components/button/button.html",'<a class="button {{ style }} {{ size }}">{{ label }}</a>\n')}]),angular.module("components/column-form/column-form.html",[]).run(["$templateCache",function(a){a.put("components/column-form/column-form.html","<div>\n  <div class='column small-12'>\n    <h3>{{ 'EDIT_STATE_TITLE' | translate }} {{ entity.label }}</h3>\n  </div>\n"+'  <carnival-form type=\'column\' entity="entity" fields="entity.fields" datas="entity.datas" action="entity.action" state="{{state}}" related-resources="entity.relatedResources" editable="true"></carnival-form>\n</div>\n')}]),angular.module("components/column-listing/column-listing.html",[]).run(["$templateCache",function(a){a.put("components/column-listing/column-listing.html",'<div class="listing">\n  <carnival-field-form-builder state=\'create\' parent-entity=\'entity.parentEntity\' field=\'field\'></carnival-field-form-builder>\n  <table class="table table-hover">\n    <thead>\n      <tr>\n        <th ng-repeat="field in getListFields()">\n          {{ field.label }}\n        </th>\n        <th>\n        </th>\n      </tr>\n    </thead>\n    <tbody>\n      <tr ng-repeat="data in datas">\n        <td ng-repeat="field in getListFields()">\n          <carnival-listing-field item="data" field="field"></carnival-listing-field>\n        </td>\n        <td>\n'+"          <carnival-field-form-builder data=\"data\" state='edit' parent-entity='entity.parentEntity' field='field'></carnival-field-form-builder>\n        </td>\n      </tr>\n    </tbody>\n  </table>\n</div>\n")}]),angular.module("components/delete-button/delete-button.html",[]).run(["$templateCache",function(a){a.put("components/delete-button/delete-button.html",'<span class="btn-delete">\n  <a  class="button alert tiny" ng-click="delete()">{{ \'DELETE_BUTTON_DELETE\' | translate }}</a>\n</span>\n')}]),angular.module("components/field-form-builder/field-form-builder.html",[]).run(["$templateCache",function(a){a.put("components/field-form-builder/field-form-builder.html","<div ng-switch='state'>\n  <div ng-switch-when='create' id=\"create_nested_{{field.entityName}}\"></div>\n  <a ng-switch-when='create' class=\"button default tiny form-builder\" ng-click=\"open()\">{{ 'NESTED_FORM_BUTTON_CREATE' | translate }}</a>\n\n  <a ng-switch-when='edit' id='editHasManyOption' ng-click='openWithData();' class=\"button warning tiny form-builder\">{{getButtonLabel()}}</a>\n"+'  <carnival-delete-button ng-switch-when="delete" action="delete" item-id="data[field.identifier]"></carnival-delete-button>\n  <div ng-switch-when=\'edit\' id="edit_nested_{{field.name}}_{{data[field.identifier]}}"></div>\n</div>\n')}]),angular.module("components/fields/belongs-to/belongs-to.html",[]).run(["$templateCache",function(a){a.put("components/fields/belongs-to/belongs-to.html",'<div>\n  <carnival-select-field data="datas" field="field.field" identifier="field.identifier" items="relatedResources">\n  </carnival-select-field>\n'+"  <carnival-field-form-builder ng-if='hasNested()' state='create' parent-entity='parentEntity' field='field'></carnival-field-form-builder>\n</div>\n")}]),angular.module("components/fields/boolean/boolean.html",[]).run(["$templateCache",function(a){a.put("components/fields/boolean/boolean.html",'<input type="checkbox" ng-model="data"></input>\n')}]),angular.module("components/fields/currency/currency.html",[]).run(["$templateCache",function(a){a.put("components/fields/currency/currency.html",'<div>\n  <input class="form-control" type="text" ng-model="data" currency></input>\n</div>\n')}]),angular.module("components/fields/date/date.html",[]).run(["$templateCache",function(a){a.put("components/fields/date/date.html",'<div>\n  <input type="datetime" date-time ng-model="$parent.data">\n</div>\n')}]),angular.module("components/fields/enum/enum.html",[]).run(["$templateCache",function(a){a.put("components/fields/enum/enum.html",'<div>\n  <carnival-select-field data="data" field="\'label\'" identifier="\'value\'" items="field.values" editable="true"></carnival-select-field>\n</div>\n')}]),angular.module("components/fields/file/file.html",[]).run(["$templateCache",function(a){a.put("components/fields/file/file.html",'<div>\n  <div ng-show="field.options.showPreview">\n    <img ng-if="checkIfIsImage(data)" ng-src="{{ data }}" width="200" height="120"/>\n    <a ng-if="!checkIfIsImage(data)" href="{{ data }}">{{ data }}</a>\n  </div>\n  <carnival-string-field label="field.label" data="data" editable="editable"></carnival-string-field>\n  <div ng-if="checkIfHasUploader()">\n    <carnival-uploader uploader="field.uploader" file-url="$parent.data"></carnival-uploader>\n  </div>\n  <div ng-if="checkIfHasGallery()">\n    <carnival-gallery gallery="field.gallery" file-url="$parent.data"></carnival-gallery>\n  </div>\n</div>\n')}]),angular.module("components/fields/has-many/has-many.html",[]).run(["$templateCache",function(a){a.put("components/fields/has-many/has-many.html","<div>\n\n  <div ng-switch='showAs()'>\n    <carnival-has-many-table ng-switch-when='table' has-nested='hasNested()'  parent-entity='parentEntity' field='field' datas='datas' state='state' editable='editable'></carnival-has-many-table>\n    <ul class='carnival-tags' ng-switch-when='tag' class='has-many-field-list'>\n      <li class='carnival-tag' ng-repeat='data in datas'>\n        <carnival-field-form-builder ng-if='hasNested()' label='{{data[field.field]}}' data=\"data\" state='edit' parent-entity='parentEntity' field='field'></carnival-field-form-builder>\n        <a id='removeHasManyOption' ng-click='remove(data.id);' class=\"button default tiny remove-tag\">x</a>\n      </li>\n    </ul>\n  </div>\n\n  <div>\n    <carnival-has-many-select ng-show='showOptions()' field='field' related-resources='relatedResources' datas='datas'></carnival-has-many-select>\n    <carnival-field-form-builder ng-if='hasNested()' state='create' parent-entity='parentEntity' field='field' datas='datas'></carnival-field-form-builder>\n  </div>\n\n</div>\n")}]),angular.module("components/fields/number/number.html",[]).run(["$templateCache",function(a){a.put("components/fields/number/number.html",'<input class="form-control" type="number" placeholder="{{ label }}" ng-model="data"></input>\n')}]),angular.module("components/fields/select/select.html",[]).run(["$templateCache",function(a){a.put("components/fields/select/select.html",'<div>\n<select ng-model="data" ng-options="item[identifier] as item[field] for item in items">\n</select>\n</div>\n')}]),angular.module("components/fields/string/string.html",[]).run(["$templateCache",function(a){a.put("components/fields/string/string.html",'<input class="form-control" type="text" placeholder="{{ label }}" ng-model="data"></input>\n')}]),angular.module("components/fields/text/text.html",[]).run(["$templateCache",function(a){a.put("components/fields/text/text.html",'<textarea class="form-control" placeholder="{{ label }}" ng-model="data"></textarea>\n')}]),angular.module("components/fields/wysiwyg/wysiwyg.html",[]).run(["$templateCache",function(a){a.put("components/fields/wysiwyg/wysiwyg.html",'<div>\n  <textarea ng-wig="data"></textarea>\n</div>\n')}]),angular.module("components/form-area/form-area.html",[]).run(["$templateCache",function(a){a.put("components/form-area/form-area.html","<div id='form-columns'>\n  <div id='master-form' class='form-column {{getDisableClass()}}'>\n    <div class='column small-12'>\n      <h3 ng-if=\"state == 'edit' \">{{ 'EDIT_STATE_TITLE' | translate }} {{ entity.label }}</h3>\n      <h3 ng-if=\"state == 'create' \">{{ 'CREATE_STATE_TITLE' | translate }} {{ entity.label }}</h3>\n    </div>\n"+'    <carnival-form type=\'normal\' entity="entity" fields="fields" datas="datas" action="entity.action" state="{{state}}" related-resources="relatedResources" editable="true"></carnival-form>\n  </div>\n</div>\n')}]),angular.module("components/form-column/form-column.html",[]).run(["$templateCache",function(a){a.put("components/form-column/form-column.html","<div ng-switch='type' ng-style=\"style\" class='children-form form-column {{cssClass}} {{getDisableClass()}}'>\n  <div class='disable-column-form'>\n  </div>\n  <span class='button' ng-click='close()'>Close</span>\n  <carnival-column-form ng-switch-when='form' entity=\"entity\" state=\"{{state}}\"></carnival-column-form>\n"+'  <carnival-column-listing ng-switch-when=\'table\' entity="entity" field="field" datas="datas"></carnival-column-listing>\n</div>\n')}]),angular.module("components/form-fields-next/form-fields-next.html",[]).run(["$templateCache",function(a){a.put("components/form-fields-next/form-fields-next.html",'<div>\n<label class=\'carnival-form-label\'>\n    {{ fields[$index + 1].label }}\n  </label>\n  <div ng-switch="fields[$index + 1].type" class=\'carnival-form-field\'>\n    <carnival-text-field ng-switch-when="text" data="datas[fields[$index + 1].name]" label="fields[$index + 1].label"></carnival-text-field>\n    <carnival-wysiwyg-field ng-switch-when="wysiwyg" data="datas[fields[$index + 1].name]" label="fields[$index + 1].label"></carnival-wysiwyg-field>\n    <carnival-boolean-field ng-switch-when="boolean" data="datas[fields[$index + 1].name]"></carnival-boolean-field>\n    <carnival-string-field ng-switch-when="string" data="datas[fields[$index + 1].name]" label="fields[$index + 1].label"></carnival-string-field>\n    <carnival-number-field ng-switch-when="number" data="datas[fields[$index + 1].name]" label="fields[$index + 1].label"></carnival-number-field>\n    <carnival-date-field ng-switch-when="date" data="datas[fields[$index + 1].name]"></carnival-date-field>\n    <carnival-file-field ng-switch-when="file" data="datas[fields[$index + 1].name]" field="fields[$index + 1]"></carnival-file-field>\n    <carnival-enum-field ng-switch-when="enum" data="datas[fields[$index + 1].name]" field="fields[$index + 1]"></carnival-enum-field>\n    <carnival-currency-field ng-switch-when="currency" data="datas[fields[$index + 1].name]" field="fields[$index + 1]"></carnival-currency-field>\n    <carnival-belongs-to-field ng-if=\'canShow(fields[$index + 1])\' ng-switch-when="belongsTo" nested-form-index="nestedFormIndex" entity="entity" field="fields[$index + 1]" datas="entity.datas" action="entity.action" related-resources="entity.relatedResources" state="{{state}}"></carnival-belongs-to-field>\n    <carnival-has-many-field ng-if=\'canShow(fields[$index + 1])\' ng-switch-when="hasMany" entity="entity" nested-form-index="nestedFormIndex" field="fields[$index + 1]" datas="entity.datas" action="entity.action" related-resources="entity.relatedResources" state="{{state}}"></carnival-has-many-field>\n    <carnival-text-field ng-switch-default data="datas[fields[$index + 1].name]" label="fields[$index + 1].label"></carnival-text-field>\n\n  </div>\n</div>\n\n')}]),angular.module("components/form-fields/form-fields.html",[]).run(["$templateCache",function(a){a.put("components/form-fields/form-fields.html",'<div>\n  <label class=\'carnival-form-label\'>\n    {{ field.label }}\n  </label>\n  <div ng-switch="field.type" class=\'carnival-form-field\'>\n    <carnival-text-field ng-switch-when="text" data="datas[field.name]" label="field.label"></carnival-text-field>\n    <carnival-wysiwyg-field ng-switch-when="wysiwyg" data="datas[field.name]" label="field.label"></carnival-wysiwyg-field>\n    <carnival-boolean-field ng-switch-when="boolean" data="datas[field.name]"></carnival-boolean-field>\n    <carnival-string-field ng-switch-when="string" data="datas[field.name]" label="field.label"></carnival-string-field>\n    <carnival-number-field ng-switch-when="number" data="datas[field.name]" label="field.label"></carnival-number-field>\n    <carnival-date-field ng-switch-when="date" data="datas[field.name]"></carnival-date-field>\n    <carnival-file-field ng-switch-when="file" data="datas[field.name]" field="field"></carnival-file-field>\n    <carnival-enum-field ng-switch-when="enum" data="datas[field.name]" field="field"></carnival-enum-field>\n    <carnival-currency-field ng-switch-when="currency" data="datas[field.name]" field="field"></carnival-currency-field>\n    <carnival-belongs-to-field ng-switch-when="belongsTo" parent-entity="entity" field="field" datas="entity.datas[field.foreignKey]" action="entity.action" related-resources="entity.relatedResources[field.endpoint]" state="{{state}}"></carnival-belongs-to-field>\n    <carnival-text-field ng-switch-default data="datas[field.name]" label="field.label"></carnival-text-field>\n  </div>\n</div>\n\n')}]),angular.module("components/form/form.html",[]).run(["$templateCache",function(a){a.put("components/form/form.html",'<div>\n\n  <form ng-init="nestedFormIndex = {value: 0}" novalidate>\n    <div ng-if="field.fieldFormType != \'related\'" ng-repeat="field in fields" ng-class="{ row: field.grid.newRow }">\n      <div>\n        <carnival-form-fields class="column small-{{ field.grid.columnSize }}" ng-show="field.grid.newRow"></carnival-form-fields>\n        <carnival-form-fields-next class="column small-{{ fields[$index + 1].grid.columnSize }}" ng-show="!fields[$index + 1].grid.newRow && $index + 1 !== fields.length"></carnival-form-fields-next>\n      </div>\n    </div>\n\n    <div class=\'column small-12\' id=\'related-fields\' ng-show=\'showRelatedFields()\'>\n      <h4>Relacionamentos</h4>\n\n      <ul class=\'tabs\'>\n        <li ng-if="field.fieldFormType == \'related\'" class="tab-title {{getTabClass($index)}}" ng-repeat="field in fields">\n          <a ng-init=\'initSelectedTab($index)\' ng-click=\'selectTab($index)\'>\n            {{ field.label }}\n          </a>\n        </li>\n      </ul>\n      <div ng-if="field.fieldFormType == \'related\'" class="row" ng-repeat="field in fields">\n        <div class=\'carnival-tab\' ng-show=\'selectedTab == $index\' id="panel{{$index}}" ng-switch="field.type">\n          <carnival-belongs-to-field ng-switch-when="belongsTo" parent-entity="entity" field="field" datas="entity.datas[field.name]" action="entity.action" related-resources="entity.relatedResources[field.name]" state="{{state}}"></carnival-belongs-to-field>\n          <carnival-has-many-field ng-switch-when="hasMany" parent-entity="entity" field="field" datas="entity.datas[field.name]" action="entity.action" related-resources="entity.relatedResources[field.name]" state="{{state}}"></carnival-has-many-field>\n        </div>\n      </div>\n    </div>\n\n    <div class=\'column small-12\'>\n      <carnival-button label="{{ \'FORM_BUTTON_SAVE\' | translate }}" style="success" size="{{saveButtonClass}}" ng-click="buttonAction()"></carnival-button>\n    </div>\n  </form>\n\n</div>\n');
}]),angular.module("components/gallery/gallery.html",[]).run(["$templateCache",function(a){a.put("components/gallery/gallery.html",'<div>\n  <carnival-button label="{{ \'GALLERY_BUTTON_OPEN\' | translate }}" style="default" size="small" ng-click="open()"></carnival-button>\n</div>\n')}]),angular.module("components/has-many-select/has-many-select.html",[]).run(["$templateCache",function(a){a.put("components/has-many-select/has-many-select.html",'<div class=\'carnival-has-many-select\'>\n  <select ng-model="selectedHasMany">\n    <option value={{$index}} ng-repeat=\'item in getAvailableResources()\'>\n    {{item[field.field]}}\n    </option>\n  </select>\n\n  <a class="button default tiny" ng-click="addHasManyOption()">Add</a>\n</div>\n')}]),angular.module("components/has-many-table/has-many-table.html",[]).run(["$templateCache",function(a){a.put("components/has-many-table/has-many-table.html",'<div class="has-many-table">\n  <table class="table table-hover">\n    <thead>\n      <tr>\n        <th ng-repeat="field in getListFields()">\n          {{ field.label }}\n        </th>\n        <th>\n        </th>\n      </tr>\n    </thead>\n    <tbody>\n      <tr ng-repeat="data in datas">\n        <td ng-repeat="field in getListFields()">\n          <carnival-listing-field item="data" field="field"></carnival-listing-field>\n        </td>\n        <td>\n          <carnival-field-form-builder ng-if="hasNested" data="data" state=\'edit\' parent-entity=\'entity.parentEntity\' field=\'field\'></carnival-field-form-builder>\n          <carnival-field-form-builder ng-if="hasNested" data="data" state=\'delete\' parent-entity=\'entity.parentEntity\' field=\'field\'></carnival-field-form-builder>\n          <a ng-if="!hasNested" class=\'button warning tiny\' href="#/edit/{{field.name}}/{{data[field.identifier]}}">Edit</a>\n        </td>\n      </tr>\n    </tbody>\n  </table>\n</div>\n')}]),angular.module("components/listing-extra-action/listing-extra-action.html",[]).run(["$templateCache",function(a){a.put("components/listing-extra-action/listing-extra-action.html",'<span class=\'carnival-listing-extra-action-{{extraAction.name}}\'>\n  <a ng-if="extraAction.action" class="button default tiny" ng-click="executeAction()">{{ getLabel() }}</a>\n  <a ng-if="extraAction.url" class="button default tiny" ng-href=\'{{ getUrl() }}\'>{{ getLabel() }}</a>\n</span>\n')}]),angular.module("components/listing-field-belongs-to/listing-field-belongs-to.html",[]).run(["$templateCache",function(a){a.put("components/listing-field-belongs-to/listing-field-belongs-to.html",'<span>\n  <a href="{{ getUrl() }}">{{ getLabel() }}</a>\n</span>\n')}]),angular.module("components/listing-field-boolean/listing-field-boolean.html",[]).run(["$templateCache",function(a){a.put("components/listing-field-boolean/listing-field-boolean.html",'<div>\n  <span ng-show="item[field.name]">&#10003;</span>\n  <span ng-show="!item[field.name]">&#10007;</span>\n</div>\n')}]),angular.module("components/listing-field-currency/listing-field-currency.html",[]).run(["$templateCache",function(a){a.put("components/listing-field-currency/listing-field-currency.html","<div>\n  {{ toCurrency(item[field.name]) }}\n</div>\n")}]),angular.module("components/listing-field-date/listing-field-date.html",[]).run(["$templateCache",function(a){a.put("components/listing-field-date/listing-field-date.html","<div>\n  {{ toDate(item[field.name]) }}\n</div>\n")}]),angular.module("components/listing-field-enum/listing-field-enum.html",[]).run(["$templateCache",function(a){a.put("components/listing-field-enum/listing-field-enum.html","<div>\n  {{ getValue(item[field.name]) }}\n</div>\n")}]),angular.module("components/listing-field-file/listing-field-file.html",[]).run(["$templateCache",function(a){a.put("components/listing-field-file/listing-field-file.html",'<div>\n  <img ng-if="checkIfIsImage(item[field.name])" ng-src="{{ item[field.name] }}" style="max-width:200px;max-height:120px"/>\n  <a ng-if="!checkIfIsImage(item[field.name])" href="{{ item[field.name] }}">{{ item[field.name] }}</a>\n</div>\n')}]),angular.module("components/listing-field-has-many/listing-field-has-many.html",[]).run(["$templateCache",function(a){a.put("components/listing-field-has-many/listing-field-has-many.html","<span>\n  <a href=\"{{ getUrl() }}\">{{ 'LISTING_HAS_MANY_PREFIX' | translate }} {{ field.label }}</a>\n</span>\n")}]),angular.module("components/listing-field/listing-field.html",[]).run(["$templateCache",function(a){a.put("components/listing-field/listing-field.html",'<span ng-switch="field.type">\n  <carnival-listing-field-belongs-to ng-switch-when="belongsTo" item="item" field="field"></carnival-listing-field-belongs-to>\n  <carnival-listing-field-has-many ng-switch-when="hasMany" item="item" field="field"></carnival-listing-field-has-many>\n  <carnival-listing-field-file ng-switch-when="file" item="item" field="field"></carnival-listing-field-file>\n  <carnival-listing-field-enum ng-switch-when="enum" item="item" field="field"></carnival-listing-field-enum>\n  <carnival-listing-field-currency ng-switch-when="currency" item="item" field="field"></carnival-listing-field-currency>\n  <carnival-listing-field-date ng-switch-when="date" item="item" field="field"></carnival-listing-field-date>\n  <span ng-switch-default>\n    {{item[field.name]}}\n  </span>\n</span>\n')}]),angular.module("components/listing/listing.html",[]).run(["$templateCache",function(a){a.put("components/listing/listing.html",'<div class="listing">\n  <table class="table table-hover">\n    <thead>\n      <tr>\n        <th ng-repeat="field in fields">\n          {{ field.label }}\n          <carnival-order-ctrl ng-show="field.views.index.sortable" field="field.name"></carnival-order-ctrl>\n        </th>\n        <th ng-show="extraActions[0]">\n          {{ \'LISTING_EXTRA_ACTIONS\' | translate }}\n        </th>\n        <th ng-if="actions">\n          {{ \'LISTING_ACTIONS\' | translate }}\n        </th>\n      </tr>\n    </thead>\n    <tbody>\n      <tr ng-repeat="data in datas">\n        <td ng-repeat="field in fields">\n          <carnival-listing-field item="data" field="field"></carnival-listing-field>\n        </td>\n        <td ng-show="extraActions[0]">\n          <carnival-listing-extra-action ng-repeat="extraAction in extraActions" item="data" extra-action=\'extraAction\'></carnival-listing-extra-action>\n        </td>\n        <td>\n          <carnival-button label="{{ \'LISTING_BUTTON_SHOW\' | translate }}" style="primary btn-details" size="tiny" ng-click="actions.show(data[identifier])"></carnival-button>\n          <carnival-button label="{{ \'LISTING_BUTTON_EDIT\' | translate }}" style="warning btn-edit" size="tiny" ng-click="actions.edit(data[identifier])"></carnival-button>\n          <carnival-delete-button item-id="data[identifier]" action="actions.delete"></carnival-button>\n        </td>\n      </tr>\n    </tbody>\n  </table>\n</div>\n')}]),angular.module("components/navbar/navbar.html",[]).run(["$templateCache",function(a){a.put("components/navbar/navbar.html",'<nav class="top-bar" data-topbar role=\'navigation\'>\n  <ul class=\'title-area\'>\n    <li class=\'name\'>\n      <h1><a href="#">{{ appName }}</h1>\n    </li>\n  </ul>\n\n  <section class=\'top-bar-section\'>\n    <ul class="left">\n      <li ng-class="{ active: checkSelEntity($index) }" ng-repeat="item in menuItems">\n      <a href="{{ buildUrl(item.link) }}" ng-click="resetPage()">{{ item.label }}</a>\n      </li>\n    </ul>\n  </section>\n</nav>\n')}]),angular.module("components/nested-form/nested-form.html",[]).run(["$templateCache",function(a){a.put("components/nested-form/nested-form.html",'<fieldset class="nested-container animated fadeIn">\n  <legend>{{ \'NESTED_FORM_TITLE_CREATE\' | translate }}</legend>\n  <carnival-form type=\'nested\' entity=\'entity\' fields="entity.fields" action="entity.action" datas="entity.datas" state="{{state}}" related-resources="entity.relatedResources" editable="true"></carnival-form>\n</fieldset>\n')}]),angular.module("components/notification/notification.html",[]).run(["$templateCache",function(a){a.put("components/notification/notification.html",'<div>\n  <div ng-repeat="notification in notifications" class="alert-box {{ notification.type }} radius">{{ notification.message }}</div>\n</div>\n')}]),angular.module("components/order-controller/order-controller.html",[]).run(["$templateCache",function(a){a.put("components/order-controller/order-controller.html",'<a ng-show="checkDirAsc()" style="font-size: 0.75em; cursor: pointer" ng-click="toggleOrder()">&#9650;</a>\n<a ng-show="!checkDirAsc()" style="font-size: 0.75em; cursor: pointer" ng-click="toggleOrder()">&#9660;</a>\n')}]),angular.module("components/pagination-controller/pagination-controller.html",[]).run(["$templateCache",function(a){a.put("components/pagination-controller/pagination-controller.html",'<nav>\n  <ul class="pagination" style="cursor: pointer;">\n\n    <li ng-class="{ disabled: currentPage === 1 }">\n      <a ng-click="prevPage()">&laquo;</a>\n    </li>\n\n    <li ng-show="currentPage > 2">\n      <a ng-click="jumpTo(currentPage - 2)">{{ currentPage - 2 }}</a>\n    </li>\n\n    <li ng-show="currentPage > 1">\n      <a ng-click="jumpTo(currentPage - 1)">{{ currentPage - 1 }}</a>\n    </li>\n\n    <li class="current">\n      <a>{{ currentPage }}</a>\n    </li>\n\n    <li ng-show="currentPage < totalPages">\n      <a ng-click="jumpTo(currentPage + 1)">{{ currentPage + 1}}</a>\n    </li>\n\n    <li ng-show="currentPage < totalPages - 1">\n      <a ng-click="jumpTo(currentPage + 2)">{{ currentPage + 2}}</a>\n    </li>\n\n    <li ng-class="{ disabled: currentPage === totalPages }">\n      <a ng-click="nextPage()">&raquo;</a>\n    </li>\n\n  </ul>\n</nav>\n')}]),angular.module("components/quickfilter-controller/quickfilter-controller.html",[]).run(["$templateCache",function(a){a.put("components/quickfilter-controller/quickfilter-controller.html",'<span>\n  <carnival-button ng-class="{ disabled: isSelected(filter.field, filter.value()) }" ng-repeat="filter in filters" label="{{ filter.label }}" style="info" size="small" ng-click="setFilter(filter.field, filter.value())"></carnival-button>\n</span>\n')}]),angular.module("components/search-controller/search-controller.html",[]).run(["$templateCache",function(a){a.put("components/search-controller/search-controller.html",'<div class="advanced-search">\n  <h4>{{ \'SEARCH_FORM_TITLE\' | translate }}</h4>\n  <hr/>\n    <p ng-repeat="field in fields" ng-if="field.views.index.searchable" ng-switch="field.type">\n      <label ng-if="field.type !== \'hasMany\'">{{ field.label }}</label>\n      <carnival-text-field ng-switch-when="wysiwyg" data="searchParams[field.name]" editable="true"></carnival-text-field>\n      <carnival-text-field ng-switch-when="text" data="searchParams[field.name]" editable="true"></carnival-text-field>\n      <carnival-string-field ng-switch-when="string" data="searchParams[field.name]" editable="true"></carnival-string-field>\n      <carnival-boolean-field ng-switch-when="boolean" data="searchParams[field.name]" editable="true"></carnival-boolean-field>\n      <carnival-currency-field ng-switch-when="currency" data="searchParams[field.name]" field="field"></carnival-currency-field>\n      <carnival-date-field ng-switch-when="date" data="searchParams[field.name]"></carnival-date-field>\n      <carnival-enum-field ng-switch-when="enum" data="searchParams[field.name]" field="field"></carnival-enum-field>\n      <carnival-select-field ng-switch-when="belongsTo" editable="true" field="field.field" identifier="field.identifier" items="relatedResources[field.endpoint]" data="searchParams[field.foreignKey]"></carnival-select-field>\n      <carnival-number-field ng-switch-when="number" data="searchParams[field.name]" label="field.label" editable="true"></carnival-number-field>\n    </p>\n  <hr/>\n  <carnival-button label="{{ \'SEARCH_FORM_SUBMIT\' | translate }}" size="small" style="default" ng-click="submit()"></carnival-button>\n</div>\n')}]),angular.module("components/show-fields/boolean/boolean.html",[]).run(["$templateCache",function(a){a.put("components/show-fields/boolean/boolean.html",'<div class="carnival-show-fields field-boolean">\n  <span ng-show="data">&#10003;</span>\n  <span ng-show="!data">&#10007;</span>\n</div>\n')}]),angular.module("components/show-fields/currency/currency.html",[]).run(["$templateCache",function(a){a.put("components/show-fields/currency/currency.html",'<div class="carnival-show-fields field-currency">\n  {{ toCurrency(data) }}\n</div>\n')}]),angular.module("components/show-fields/date/date.html",[]).run(["$templateCache",function(a){a.put("components/show-fields/date/date.html",'<div class="carnival-show-fields field-date">\n  {{ toDate(data) }}\n</div>\n')}]),angular.module("components/show-fields/enum/enum.html",[]).run(["$templateCache",function(a){a.put("components/show-fields/enum/enum.html",'<div class="carnival-show-fields field-enum">\n  {{ getValue(data) }}\n</div>\n')}]),angular.module("components/show-fields/file/file.html",[]).run(["$templateCache",function(a){a.put("components/show-fields/file/file.html",'<div class="carnival-show-fields field-file">\n  <img ng-if="checkIfIsImage(data)" ng-src="{{ data }}" width="200" height="120"/>\n  <a ng-if="!checkIfIsImage(data)" href="{{ data }}">{{ data }}</a>\n</div>\n')}]),angular.module("components/show-fields/has-many/has-many.html",[]).run(["$templateCache",function(a){a.put("components/show-fields/has-many/has-many.html",'<div class="carnival-show-fields field-has-many">\n  <ul>\n    <li ng-repeat="item in data">{{ item[field.field] }}</li>\n  </ul>\n</div>\n')}]),angular.module("components/show-fields/show-fields.html",[]).run(["$templateCache",function(a){a.put("components/show-fields/show-fields.html",'<div>\n  <label class=\'carnival-form-label\'>\n    {{ field.label }}\n  </label>\n  <div ng-switch="field.type" class=\'carnival-form-field\'>\n    <carnival-show-string ng-switch-when="text" data="entity.datas[field.name]"></carnival-show-string>\n    <carnival-show-wysiwyg ng-switch-when="wysiwyg" data="entity.datas[field.name]"></carnival-show-wysiwyg>\n    <carnival-show-boolean ng-switch-when="boolean" data="entity.datas[field.name]"></carnival-show-boolean>\n    <carnival-show-string ng-switch-when="string" data="entity.datas[field.name]"></carnival-show-string>\n    <carnival-show-string ng-switch-when="number" data="entity.datas[field.name]"></carnival-show-string>\n    <carnival-show-date ng-switch-when="date" data="entity.datas[field.name]"></carnival-show-date>\n    <carnival-show-file ng-switch-when="file" data="entity.datas[field.name]"></carnival-show-file>\n    <carnival-show-enum ng-switch-when="enum" data="entity.datas[field.name]" field="field"></carnival-show-enum>\n    <carnival-show-currency ng-switch-when="currency" data="entity.datas[field.name]" field="field"></carnival-show-currency>\n    <carnival-show-string ng-switch-when="belongsTo" data="entity.datas[field.name][field.field]"></carnival-show-string>\n    <carnival-show-has-many ng-switch-when="hasMany" data="entity.datas[field.name]" field="field"></carnival-show-has-many>\n    <carnival-show-string ng-switch-default data="entity.datas[field.name]"></carnival-text-field>\n  </div>\n</div>\n\n')}]),angular.module("components/show-fields/string/string.html",[]).run(["$templateCache",function(a){a.put("components/show-fields/string/string.html",'<div class="carnival-show-fields field-string">\n  {{ data }}\n</div>\n\n')}]),angular.module("components/show-fields/wysiwyg/wysiwyg.html",[]).run(["$templateCache",function(a){a.put("components/show-fields/wysiwyg/wysiwyg.html",'<div class="carnival-show-fields field-wysiwyg">\n  {{ data }}\n</div>\n')}]),angular.module("components/summarized-items/summarized-items.html",[]).run(["$templateCache",function(a){a.put("components/summarized-items/summarized-items.html","<div ng-click='openItems()'>\n{{datas.length}} {{field.name}}\n</div>\n")}]),angular.module("components/uploader/uploader.html",[]).run(["$templateCache",function(a){a.put("components/uploader/uploader.html",'<div>\n  <input type="file" file-input="files"></input>\n  <carnival-button label="{{ \'UPLOAD_BUTTON\' | translate }}" style="default" size="tiny" ng-click="upload()"></carnival-button>\n</div>\n')}]),angular.module("states/main.create/create.html",[]).run(["$templateCache",function(a){a.put("states/main.create/create.html",'<carnival-form-area type="normal" entity="entity" fields="entity.fields" datas="entity.datas" action="entity.action" state="create" related-resources="entity.relatedResources" editable="true"></carnival-form-area>\n')}]),angular.module("states/main.edit/edit.html",[]).run(["$templateCache",function(a){a.put("states/main.edit/edit.html",'<carnival-form-area type=\'normal\' entity="entity" fields="entity.fields" datas="entity.datas" action="entity.action" state="edit" related-resources="entity.relatedResources" editable="true"></carnival-form-area>\n')}]),angular.module("states/main.list/list.html",[]).run(["$templateCache",function(a){a.put("states/main.list/list.html",'<div class=\'row\'>\n  <carnival-search-ctrl fields="entity.fields" related-resources="entity.relatedResources"></carnival-search-ctrl>\n  <div class="carnival-list column">\n\n    <div class="column large-10" style="text-align:left">\n      <h3>{{ \'LIST_STATE_TITLE\' | translate }} {{ entity.label }}</h3>\n    </div>\n\n    <div class="column large-2" style="text-align:right">\n      <carnival-button label="{{ \'LIST_STATE_BUTTON_CREATE\' | translate }}" style="success" size="small" ng-click="entity.actions.create()"></carnival-button>\n    </div>\n\n    <div class="column large-12">\n      <carnival-quick-filter filters="entity.model.quickFilters"></carnival-quick-filter>\n    </div>\n\n\n    <carnival-listing entity="entity" entity-name="entity.name" actions="entity.actions" extra-actions="entity.extraActions" identifier="entity.identifier" datas="entity.datas" fields="entity.fields"></carnival-listing>\n    <carnival-pagination-ctrl current-page="pages.current" total-pages="pages.total"></carnival-pagination-ctrl>\n\n  </div>\n</div>\n')}]),angular.module("states/main.show/show.html",[]).run(["$templateCache",function(a){a.put("states/main.show/show.html",'<div class="carnival-show-state">\n\n  <h3>{{ \'SHOW_STATE_TITLE\' | translate }} {{ entity.label }}</h3>\n\n  <div class="row" ng-repeat="field in entity.fields">\n    <carnival-show-fields class="column small-12"></carnival-show-fields>\n  </div>\n\n  <div class="column small-12">\n    <carnival-button label="{{ \'FORM_BUTTON_EDIT\' | translate }}" style="warning" size="small" ng-click="buttonAction()"></carnival-button>\n  </div>\n\n</div>\n')}]),angular.module("states/main/main.html",[]).run(["$templateCache",function(a){a.put("states/main/main.html",'<div class=\'carnival-header\'>\n  <carnival-navbar app-name="app_name" menu-items="menu_items"></carnival-navbar>\n  <div class="row carnival-notification">\n    <carnival-notification></carnival-notification>\n  </div>\n</div>\n<div ui-view></div>\n')}]),function(a,b,c){function d(a){var b=w(),c=b.querySelector("h2"),d=b.querySelector("p"),e=b.querySelector("button.cancel"),f=b.querySelector("button.confirm");if(c.innerHTML=a.html?a.title:B(a.title).split("\n").join("<br>"),d.innerHTML=a.html?a.text:B(a.text||"").split("\n").join("<br>"),a.text&&D(d),a.customClass)z(b,a.customClass),b.setAttribute("data-custom-class",a.customClass);else{var g=b.getAttribute("data-custom-class");A(b,g),b.setAttribute("data-custom-class","")}if(F(b.querySelectorAll(".sa-icon")),a.type&&!k()){for(var i=!1,j=0;j<u.length;j++)if(a.type===u[j]){i=!0;break}if(!i)return l("Unknown alert type: "+a.type),!1;var m=b.querySelector(".sa-icon.sa-"+a.type);switch(D(m),a.type){case"success":z(m,"animate"),z(m.querySelector(".sa-tip"),"animateSuccessTip"),z(m.querySelector(".sa-long"),"animateSuccessLong");break;case"error":z(m,"animateErrorIcon"),z(m.querySelector(".sa-x-mark"),"animateXMark");break;case"warning":z(m,"pulseWarning"),z(m.querySelector(".sa-body"),"pulseWarningIns"),z(m.querySelector(".sa-dot"),"pulseWarningIns")}}if(a.imageUrl){var n=b.querySelector(".sa-icon.sa-custom");n.style.backgroundImage="url("+a.imageUrl+")",D(n);var o=80,p=80;if(a.imageSize){var q=a.imageSize.toString().split("x"),r=q[0],s=q[1];r&&s?(o=r,p=s):l("Parameter imageSize expects value with format WIDTHxHEIGHT, got "+a.imageSize)}n.setAttribute("style",n.getAttribute("style")+"width:"+o+"px; height:"+p+"px")}b.setAttribute("data-has-cancel-button",a.showCancelButton),a.showCancelButton?e.style.display="inline-block":F(e),b.setAttribute("data-has-confirm-button",a.showConfirmButton),a.showConfirmButton?f.style.display="inline-block":F(f),a.cancelButtonText&&(e.innerHTML=B(a.cancelButtonText)),a.confirmButtonText&&(f.innerHTML=B(a.confirmButtonText)),f.style.backgroundColor=a.confirmButtonColor,h(f,a.confirmButtonColor),b.setAttribute("data-allow-ouside-click",a.allowOutsideClick);var t=!!a.doneFunction;b.setAttribute("data-has-done-function",t),a.animation?b.setAttribute("data-animation","pop"):b.setAttribute("data-animation","none"),b.setAttribute("data-timer",a.timer)}function e(a,b){a=String(a).replace(/[^0-9a-f]/gi,""),a.length<6&&(a=a[0]+a[0]+a[1]+a[1]+a[2]+a[2]),b=b||0;var c,d,e="#";for(d=0;3>d;d++)c=parseInt(a.substr(2*d,2),16),c=Math.round(Math.min(Math.max(0,c+c*b),255)).toString(16),e+=("00"+c).substr(c.length);return e}function f(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a}function g(a){var b=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a);return b?parseInt(b[1],16)+", "+parseInt(b[2],16)+", "+parseInt(b[3],16):null}function h(a,b){var c=g(b);a.style.boxShadow="0 0 2px rgba("+c+", 0.8), inset 0 0 0 1px rgba(0, 0, 0, 0.05)"}function i(){var a=w();I(x(),10),D(a),z(a,"showSweetAlert"),A(a,"hideSweetAlert"),m=b.activeElement;var c=a.querySelector("button.confirm");c.focus(),setTimeout(function(){z(a,"visible")},500);var d=a.getAttribute("data-timer");"null"!==d&&""!==d&&(a.timeout=setTimeout(function(){q.close()},d))}function j(){var a=w();a.style.marginTop=H(w())}function k(){return!(!a.attachEvent||a.addEventListener)}function l(b){a.console&&a.console.log("SweetAlert: "+b)}var m,n,o,p,q,r,s=".sweet-alert",t=".sweet-overlay",u=["error","warning","info","success"],v={title:"",text:"",type:null,allowOutsideClick:!1,showConfirmButton:!0,showCancelButton:!1,closeOnConfirm:!0,closeOnCancel:!0,confirmButtonText:"OK",confirmButtonColor:"#AEDEF4",cancelButtonText:"Cancel",imageUrl:null,imageSize:null,timer:null,customClass:"",html:!1,animation:!0,allowEscapeKey:!0},w=function(){var a=b.querySelector(s);return a||(M(),a=w()),a},x=function(){return b.querySelector(t)},y=function(a,b){return new RegExp(" "+b+" ").test(" "+a.className+" ")},z=function(a,b){y(a,b)||(a.className+=" "+b)},A=function(a,b){var c=" "+a.className.replace(/[\t\r\n]/g," ")+" ";if(y(a,b)){for(;c.indexOf(" "+b+" ")>=0;)c=c.replace(" "+b+" "," ");a.className=c.replace(/^\s+|\s+$/g,"")}},B=function(a){var c=b.createElement("div");return c.appendChild(b.createTextNode(a)),c.innerHTML},C=function(a){a.style.opacity="",a.style.display="block"},D=function(a){if(a&&!a.length)return C(a);for(var b=0;b<a.length;++b)C(a[b])},E=function(a){a.style.opacity="",a.style.display="none"},F=function(a){if(a&&!a.length)return E(a);for(var b=0;b<a.length;++b)E(a[b])},G=function(a,b){for(var c=b.parentNode;null!==c;){if(c===a)return!0;c=c.parentNode}return!1},H=function(a){a.style.left="-9999px",a.style.display="block";var b,c=a.clientHeight;return b="undefined"!=typeof getComputedStyle?parseInt(getComputedStyle(a).getPropertyValue("padding"),10):parseInt(a.currentStyle.padding),a.style.left="",a.style.display="none","-"+parseInt(c/2+b)+"px"},I=function(a,b){if(+a.style.opacity<1){b=b||16,a.style.opacity=0,a.style.display="block";var c=+new Date,d=function(){a.style.opacity=+a.style.opacity+(new Date-c)/100,c=+new Date,+a.style.opacity<1&&setTimeout(d,b)};d()}a.style.display="block"},J=function(a,b){b=b||16,a.style.opacity=1;var c=+new Date,d=function(){a.style.opacity=+a.style.opacity-(new Date-c)/100,c=+new Date,+a.style.opacity>0?setTimeout(d,b):a.style.display="none"};d()},K=function(c){if("function"==typeof MouseEvent){var d=new MouseEvent("click",{view:a,bubbles:!1,cancelable:!0});c.dispatchEvent(d)}else if(b.createEvent){var e=b.createEvent("MouseEvents");e.initEvent("click",!1,!1),c.dispatchEvent(e)}else b.createEventObject?c.fireEvent("onclick"):"function"==typeof c.onclick&&c.onclick()},L=function(b){"function"==typeof b.stopPropagation?(b.stopPropagation(),b.preventDefault()):a.event&&a.event.hasOwnProperty("cancelBubble")&&(a.event.cancelBubble=!0)},M=function(){var a='<div class="sweet-overlay" tabIndex="-1"></div><div class="sweet-alert" tabIndex="-1"><div class="sa-icon sa-error"><span class="sa-x-mark"><span class="sa-line sa-left"></span><span class="sa-line sa-right"></span></span></div><div class="sa-icon sa-warning"> <span class="sa-body"></span> <span class="sa-dot"></span> </div> <div class="sa-icon sa-info"></div> <div class="sa-icon sa-success"> <span class="sa-line sa-tip"></span> <span class="sa-line sa-long"></span> <div class="sa-placeholder"></div> <div class="sa-fix"></div> </div> <div class="sa-icon sa-custom"></div> <h2>Title</h2><p>Text</p><button class="cancel" tabIndex="2">Cancel</button><button class="confirm" tabIndex="1">OK</button></div>',c=b.createElement("div");for(c.innerHTML=a;c.firstChild;)b.body.appendChild(c.firstChild)};q=r=function(){function g(a){var b=r;return"undefined"!=typeof b[a]?b[a]:v[a]}function k(b){var d=b||a.event,e=d.keyCode||d.which;if(-1!==[9,13,32,27].indexOf(e)){for(var f=d.target||d.srcElement,g=-1,i=0;i<H.length;i++)if(f===H[i]){g=i;break}9===e?(f=-1===g?E:g===H.length-1?H[0]:H[g+1],L(d),f.focus(),h(f,s.confirmButtonColor)):(f=13===e||32===e?-1===g?E:c:27===e&&s.allowEscapeKey===!0?F:c,f!==c&&K(f,d))}}function m(b){var c=b||a.event,d=c.target||c.srcElement,e=c.relatedTarget,f=y(A,"visible");if(f){var g=-1;if(null!==e){for(var h=0;h<H.length;h++)if(e===H[h]){g=h;break}-1===g&&d.focus()}else p=d}}var r=arguments[0];if(arguments[0]===c)return l("SweetAlert expects at least 1 attribute!"),!1;var s=f({},v);switch(typeof arguments[0]){case"string":s.title=arguments[0],s.text=arguments[1]||"",s.type=arguments[2]||"";break;case"object":if(arguments[0].title===c)return l('Missing "title" argument!'),!1;s.title=arguments[0].title;for(var t=["text","type","customClass","allowOutsideClick","showConfirmButton","showCancelButton","closeOnConfirm","closeOnCancel","timer","confirmButtonColor","cancelButtonText","imageUrl","imageSize","html","animation","allowEscapeKey"],u=t.length,x=0;u>x;x++){var z=t[x];s[z]=g(z)}s.confirmButtonText=s.showCancelButton?"Confirm":v.confirmButtonText,s.confirmButtonText=g("confirmButtonText"),s.doneFunction=arguments[1]||null;break;default:return l('Unexpected type of argument! Expected "string" or "object", got '+typeof arguments[0]),!1}d(s),j(),i();for(var A=w(),B=function(b){var c=b||a.event,d=c.target||c.srcElement,f=-1!==d.className.indexOf("confirm"),g=y(A,"visible"),h=s.doneFunction&&"true"===A.getAttribute("data-has-done-function");switch(c.type){case"mouseover":f&&(d.style.backgroundColor=e(s.confirmButtonColor,-.04));break;case"mouseout":f&&(d.style.backgroundColor=s.confirmButtonColor);break;case"mousedown":f&&(d.style.backgroundColor=e(s.confirmButtonColor,-.14));break;case"mouseup":f&&(d.style.backgroundColor=e(s.confirmButtonColor,-.04));break;case"focus":var i=A.querySelector("button.confirm"),j=A.querySelector("button.cancel");f?j.style.boxShadow="none":i.style.boxShadow="none";break;case"click":if(f&&h&&g)s.doneFunction(!0),s.closeOnConfirm&&q.close();else if(h&&g){var k=String(s.doneFunction).replace(/\s/g,""),l="function("===k.substring(0,9)&&")"!==k.substring(9,10);l&&s.doneFunction(!1),s.closeOnCancel&&q.close()}else q.close()}},C=A.querySelectorAll("button"),D=0;D<C.length;D++)C[D].onclick=B,C[D].onmouseover=B,C[D].onmouseout=B,C[D].onmousedown=B,C[D].onfocus=B;n=b.onclick,b.onclick=function(b){var c=b||a.event,d=c.target||c.srcElement,e=A===d,f=G(A,d),g=y(A,"visible"),h="true"===A.getAttribute("data-allow-ouside-click");!e&&!f&&g&&h&&q.close()};var E=A.querySelector("button.confirm"),F=A.querySelector("button.cancel"),H=A.querySelectorAll("button[tabindex]");o=a.onkeydown,a.onkeydown=k,E.onblur=m,F.onblur=m,a.onfocus=function(){a.setTimeout(function(){p!==c&&(p.focus(),p=c)},0)}},q.setDefaults=r.setDefaults=function(a){if(!a)throw new Error("userParams is required");if("object"!=typeof a)throw new Error("userParams has to be a object");f(v,a)},q.close=r.close=function(){var d=w();J(x(),5),J(d,5),A(d,"showSweetAlert"),z(d,"hideSweetAlert"),A(d,"visible");var e=d.querySelector(".sa-icon.sa-success");A(e,"animate"),A(e.querySelector(".sa-tip"),"animateSuccessTip"),A(e.querySelector(".sa-long"),"animateSuccessLong");var f=d.querySelector(".sa-icon.sa-error");A(f,"animateErrorIcon"),A(f.querySelector(".sa-x-mark"),"animateXMark");var g=d.querySelector(".sa-icon.sa-warning");A(g,"pulseWarning"),A(g.querySelector(".sa-body"),"pulseWarningIns"),A(g.querySelector(".sa-dot"),"pulseWarningIns"),a.onkeydown=o,b.onclick=n,m&&m.focus(),p=c,clearTimeout(d.timeout)},"function"==typeof define&&define.amd?define(function(){return q}):"undefined"!=typeof module&&module.exports?module.exports=q:"undefined"!=typeof a&&(a.sweetAlert=a.swal=q)}(window,document),"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports="ui.router"),function(a,b,c){function d(a,b){return R(new(R(function(){},{prototype:a})),b)}function e(a){return Q(arguments,function(b){b!==a&&Q(b,function(b,c){a.hasOwnProperty(c)||(a[c]=b)})}),a}function f(a,b){var c=[];for(var d in a.path){if(a.path[d]!==b.path[d])break;c.push(a.path[d])}return c}function g(a){if(Object.keys)return Object.keys(a);var b=[];return Q(a,function(a,c){b.push(c)}),b}function h(a,b){if(Array.prototype.indexOf)return a.indexOf(b,Number(arguments[2])||0);var c=a.length>>>0,d=Number(arguments[2])||0;for(d=0>d?Math.ceil(d):Math.floor(d),0>d&&(d+=c);c>d;d++)if(d in a&&a[d]===b)return d;return-1}function i(a,b,c,d){var e,i=f(c,d),j={},k=[];for(var l in i)if(i[l]&&i[l].params&&(e=g(i[l].params),e.length))for(var m in e)h(k,e[m])>=0||(k.push(e[m]),j[e[m]]=a[e[m]]);return R({},j,b)}function j(a,b,c){if(!c){c=[];for(var d in a)c.push(d)}for(var e=0;e<c.length;e++){var f=c[e];if(a[f]!=b[f])return!1}return!0}function k(a,b){var c={};return Q(a,function(a){c[a]=b[a]}),c}function l(a){var b={},c=Array.prototype.concat.apply(Array.prototype,Array.prototype.slice.call(arguments,1));return Q(c,function(c){c in a&&(b[c]=a[c])}),b}function m(a){var b={},c=Array.prototype.concat.apply(Array.prototype,Array.prototype.slice.call(arguments,1));for(var d in a)-1==h(c,d)&&(b[d]=a[d]);return b}function n(a,b){var c=P(a),d=c?[]:{};return Q(a,function(a,e){b(a,e)&&(d[c?d.length:e]=a)}),d}function o(a,b){var c=P(a)?[]:{};return Q(a,function(a,d){c[d]=b(a,d)}),c}function p(a,b){var d=1,f=2,i={},j=[],k=i,l=R(a.when(i),{$$promises:i,$$values:i});this.study=function(i){function n(a,c){if(s[c]!==f){if(r.push(c),s[c]===d)throw r.splice(0,h(r,c)),new Error("Cyclic dependency: "+r.join(" -> "));if(s[c]=d,N(a))q.push(c,[function(){return b.get(a)}],j);else{var e=b.annotate(a);Q(e,function(a){a!==c&&i.hasOwnProperty(a)&&n(i[a],a)}),q.push(c,a,e)}r.pop(),s[c]=f}}function o(a){return O(a)&&a.then&&a.$$promises}if(!O(i))throw new Error("'invocables' must be an object");var p=g(i||{}),q=[],r=[],s={};return Q(i,n),i=r=s=null,function(d,f,g){function h(){--u||(v||e(t,f.$$values),r.$$values=t,r.$$promises=r.$$promises||!0,delete r.$$inheritedValues,n.resolve(t))}function i(a){r.$$failure=a,n.reject(a)}function j(c,e,f){function j(a){l.reject(a),i(a)}function k(){
if(!L(r.$$failure))try{l.resolve(b.invoke(e,g,t)),l.promise.then(function(a){t[c]=a,h()},j)}catch(a){j(a)}}var l=a.defer(),m=0;Q(f,function(a){s.hasOwnProperty(a)&&!d.hasOwnProperty(a)&&(m++,s[a].then(function(b){t[a]=b,--m||k()},j))}),m||k(),s[c]=l.promise}if(o(d)&&g===c&&(g=f,f=d,d=null),d){if(!O(d))throw new Error("'locals' must be an object")}else d=k;if(f){if(!o(f))throw new Error("'parent' must be a promise returned by $resolve.resolve()")}else f=l;var n=a.defer(),r=n.promise,s=r.$$promises={},t=R({},d),u=1+q.length/3,v=!1;if(L(f.$$failure))return i(f.$$failure),r;f.$$inheritedValues&&e(t,m(f.$$inheritedValues,p)),R(s,f.$$promises),f.$$values?(v=e(t,m(f.$$values,p)),r.$$inheritedValues=m(f.$$values,p),h()):(f.$$inheritedValues&&(r.$$inheritedValues=m(f.$$inheritedValues,p)),f.then(h,i));for(var w=0,x=q.length;x>w;w+=3)d.hasOwnProperty(q[w])?h():j(q[w],q[w+1],q[w+2]);return r}},this.resolve=function(a,b,c,d){return this.study(a)(b,c,d)}}function q(a,b,c){this.fromConfig=function(a,b,c){return L(a.template)?this.fromString(a.template,b):L(a.templateUrl)?this.fromUrl(a.templateUrl,b):L(a.templateProvider)?this.fromProvider(a.templateProvider,b,c):null},this.fromString=function(a,b){return M(a)?a(b):a},this.fromUrl=function(c,d){return M(c)&&(c=c(d)),null==c?null:a.get(c,{cache:b,headers:{Accept:"text/html"}}).then(function(a){return a.data})},this.fromProvider=function(a,b,d){return c.invoke(a,null,d||{params:b})}}function r(a,b,e){function f(b,c,d,e){if(q.push(b),o[b])return o[b];if(!/^\w+([-.]+\w+)*(?:\[\])?$/.test(b))throw new Error("Invalid parameter name '"+b+"' in pattern '"+a+"'");if(p[b])throw new Error("Duplicate parameter name '"+b+"' in pattern '"+a+"'");return p[b]=new U.Param(b,c,d,e),p[b]}function g(a,b,c,d){var e=["",""],f=a.replace(/[\\\[\]\^$*+?.()|{}]/g,"\\$&");if(!b)return f;switch(c){case!1:e=["(",")"+(d?"?":"")];break;case!0:f=f.replace(/\/$/,""),e=["(?:/(",")|/)?"];break;default:e=["("+c+"|",")?"]}return f+e[0]+b+e[1]}function h(e,f){var g,h,i,j,k;return g=e[2]||e[3],k=b.params[g],i=a.substring(m,e.index),h=f?e[4]:e[4]||("*"==e[1]?".*":null),h&&(j=U.type(h)||d(U.type("string"),{pattern:new RegExp(h,b.caseInsensitive?"i":c)})),{id:g,regexp:h,segment:i,type:j,cfg:k}}b=R({params:{}},O(b)?b:{});var i,j=/([:*])([\w\[\]]+)|\{([\w\[\]]+)(?:\:\s*((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,k=/([:]?)([\w\[\].-]+)|\{([\w\[\].-]+)(?:\:\s*((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,l="^",m=0,n=this.segments=[],o=e?e.params:{},p=this.params=e?e.params.$$new():new U.ParamSet,q=[];this.source=a;for(var r,s,t;(i=j.exec(a))&&(r=h(i,!1),!(r.segment.indexOf("?")>=0));)s=f(r.id,r.type,r.cfg,"path"),l+=g(r.segment,s.type.pattern.source,s.squash,s.isOptional),n.push(r.segment),m=j.lastIndex;t=a.substring(m);var u=t.indexOf("?");if(u>=0){var v=this.sourceSearch=t.substring(u);if(t=t.substring(0,u),this.sourcePath=a.substring(0,m+u),v.length>0)for(m=0;i=k.exec(v);)r=h(i,!0),s=f(r.id,r.type,r.cfg,"search"),m=j.lastIndex}else this.sourcePath=a,this.sourceSearch="";l+=g(t)+(b.strict===!1?"/?":"")+"$",n.push(t),this.regexp=new RegExp(l,b.caseInsensitive?"i":c),this.prefix=n[0],this.$$paramNames=q}function s(a){R(this,a)}function t(){function a(a){return null!=a?a.toString().replace(/~/g,"~~").replace(/\//g,"~2F"):a}function e(a){return null!=a?a.toString().replace(/~2F/g,"/").replace(/~~/g,"~"):a}function f(){return{strict:p,caseInsensitive:m}}function i(a){return M(a)||P(a)&&M(a[a.length-1])}function j(){for(;w.length;){var a=w.shift();if(a.pattern)throw new Error("You cannot override a type's .pattern at runtime.");b.extend(u[a.name],l.invoke(a.def))}}function k(a){R(this,a||{})}U=this;var l,m=!1,p=!0,q=!1,u={},v=!0,w=[],x={string:{encode:a,decode:e,is:function(a){return null==a||!L(a)||"string"==typeof a},pattern:/[^\/]*/},"int":{encode:a,decode:function(a){return parseInt(a,10)},is:function(a){return L(a)&&this.decode(a.toString())===a},pattern:/\d+/},bool:{encode:function(a){return a?1:0},decode:function(a){return 0!==parseInt(a,10)},is:function(a){return a===!0||a===!1},pattern:/0|1/},date:{encode:function(a){return this.is(a)?[a.getFullYear(),("0"+(a.getMonth()+1)).slice(-2),("0"+a.getDate()).slice(-2)].join("-"):c},decode:function(a){if(this.is(a))return a;var b=this.capture.exec(a);return b?new Date(b[1],b[2]-1,b[3]):c},is:function(a){return a instanceof Date&&!isNaN(a.valueOf())},equals:function(a,b){return this.is(a)&&this.is(b)&&a.toISOString()===b.toISOString()},pattern:/[0-9]{4}-(?:0[1-9]|1[0-2])-(?:0[1-9]|[1-2][0-9]|3[0-1])/,capture:/([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])/},json:{encode:b.toJson,decode:b.fromJson,is:b.isObject,equals:b.equals,pattern:/[^\/]*/},any:{encode:b.identity,decode:b.identity,equals:b.equals,pattern:/.*/}};t.$$getDefaultValue=function(a){if(!i(a.value))return a.value;if(!l)throw new Error("Injectable functions cannot be called at configuration time");return l.invoke(a.value)},this.caseInsensitive=function(a){return L(a)&&(m=a),m},this.strictMode=function(a){return L(a)&&(p=a),p},this.defaultSquashPolicy=function(a){if(!L(a))return q;if(a!==!0&&a!==!1&&!N(a))throw new Error("Invalid squash policy: "+a+". Valid policies: false, true, arbitrary-string");return q=a,a},this.compile=function(a,b){return new r(a,R(f(),b))},this.isMatcher=function(a){if(!O(a))return!1;var b=!0;return Q(r.prototype,function(c,d){M(c)&&(b=b&&L(a[d])&&M(a[d]))}),b},this.type=function(a,b,c){if(!L(b))return u[a];if(u.hasOwnProperty(a))throw new Error("A type named '"+a+"' has already been defined.");return u[a]=new s(R({name:a},b)),c&&(w.push({name:a,def:c}),v||j()),this},Q(x,function(a,b){u[b]=new s(R({name:b},a))}),u=d(u,{}),this.$get=["$injector",function(a){return l=a,v=!1,j(),Q(x,function(a,b){u[b]||(u[b]=new s(a))}),this}],this.Param=function(a,d,e,f){function j(a){var b=O(a)?g(a):[],c=-1===h(b,"value")&&-1===h(b,"type")&&-1===h(b,"squash")&&-1===h(b,"array");return c&&(a={value:a}),a.$$fn=i(a.value)?a.value:function(){return a.value},a}function k(c,d,e){if(c.type&&d)throw new Error("Param '"+a+"' has two type configurations.");return d?d:c.type?b.isString(c.type)?u[c.type]:c.type instanceof s?c.type:new s(c.type):"config"===e?u.any:u.string}function m(){var b={array:"search"===f?"auto":!1},c=a.match(/\[\]$/)?{array:!0}:{};return R(b,c,e).array}function p(a,b){var c=a.squash;if(!b||c===!1)return!1;if(!L(c)||null==c)return q;if(c===!0||N(c))return c;throw new Error("Invalid squash policy: '"+c+"'. Valid policies: false, true, or arbitrary string")}function r(a,b,d,e){var f,g,i=[{from:"",to:d||b?c:""},{from:null,to:d||b?c:""}];return f=P(a.replace)?a.replace:[],N(e)&&f.push({from:e,to:c}),g=o(f,function(a){return a.from}),n(i,function(a){return-1===h(g,a.from)}).concat(f)}function t(){if(!l)throw new Error("Injectable functions cannot be called at configuration time");var a=l.invoke(e.$$fn);if(null!==a&&a!==c&&!x.type.is(a))throw new Error("Default value ("+a+") for parameter '"+x.id+"' is not an instance of Type ("+x.type.name+")");return a}function v(a){function b(a){return function(b){return b.from===a}}function c(a){var c=o(n(x.replace,b(a)),function(a){return a.to});return c.length?c[0]:a}return a=c(a),L(a)?x.type.$normalize(a):t()}function w(){return"{Param:"+a+" "+d+" squash: '"+A+"' optional: "+z+"}"}var x=this;e=j(e),d=k(e,d,f);var y=m();d=y?d.$asArray(y,"search"===f):d,"string"!==d.name||y||"path"!==f||e.value!==c||(e.value="");var z=e.value!==c,A=p(e,z),B=r(e,y,z,A);R(this,{id:a,type:d,location:f,array:y,squash:A,replace:B,isOptional:z,value:v,dynamic:c,config:e,toString:w})},k.prototype={$$new:function(){return d(this,R(new k,{$$parent:this}))},$$keys:function(){for(var a=[],b=[],c=this,d=g(k.prototype);c;)b.push(c),c=c.$$parent;return b.reverse(),Q(b,function(b){Q(g(b),function(b){-1===h(a,b)&&-1===h(d,b)&&a.push(b)})}),a},$$values:function(a){var b={},c=this;return Q(c.$$keys(),function(d){b[d]=c[d].value(a&&a[d])}),b},$$equals:function(a,b){var c=!0,d=this;return Q(d.$$keys(),function(e){var f=a&&a[e],g=b&&b[e];d[e].type.equals(f,g)||(c=!1)}),c},$$validates:function(a){var d,e,f,g,h,i=this.$$keys();for(d=0;d<i.length&&(e=this[i[d]],f=a[i[d]],f!==c&&null!==f||!e.isOptional);d++){if(g=e.type.$normalize(f),!e.type.is(g))return!1;if(h=e.type.encode(g),b.isString(h)&&!e.type.pattern.exec(h))return!1}return!0},$$parent:c},this.ParamSet=k}function u(a,d){function e(a){var b=/^\^((?:\\[^a-zA-Z0-9]|[^\\\[\]\^$*+?.()|{}]+)*)/.exec(a.source);return null!=b?b[1].replace(/\\(.)/g,"$1"):""}function f(a,b){return a.replace(/\$(\$|\d{1,2})/,function(a,c){return b["$"===c?0:Number(c)]})}function g(a,b,c){if(!c)return!1;var d=a.invoke(b,b,{$match:c});return L(d)?d:!0}function h(d,e,f,g,h){function m(a,b,c){return"/"===q?a:b?q.slice(0,-1)+a:c?q.slice(1)+a:a}function n(a){function b(a){var b=a(f,d);return b?(N(b)&&d.replace().url(b),!0):!1}if(!a||!a.defaultPrevented){p&&d.url()===p;p=c;var e,g=j.length;for(e=0;g>e;e++)if(b(j[e]))return;k&&b(k)}}function o(){return i=i||e.$on("$locationChangeSuccess",n)}var p,q=g.baseHref(),r=d.url();return l||o(),{sync:function(){n()},listen:function(){return o()},update:function(a){return a?void(r=d.url()):void(d.url()!==r&&(d.url(r),d.replace()))},push:function(a,b,e){var f=a.format(b||{});null!==f&&b&&b["#"]&&(f+="#"+b["#"]),d.url(f),p=e&&e.$$avoidResync?d.url():c,e&&e.replace&&d.replace()},href:function(c,e,f){if(!c.validates(e))return null;var g=a.html5Mode();b.isObject(g)&&(g=g.enabled),g=g&&h.history;var i=c.format(e);if(f=f||{},g||null===i||(i="#"+a.hashPrefix()+i),null!==i&&e&&e["#"]&&(i+="#"+e["#"]),i=m(i,g,f.absolute),!f.absolute||!i)return i;var j=!g&&i?"/":"",k=d.port();return k=80===k||443===k?"":":"+k,[d.protocol(),"://",d.host(),k,j,i].join("")}}}var i,j=[],k=null,l=!1;this.rule=function(a){if(!M(a))throw new Error("'rule' must be a function");return j.push(a),this},this.otherwise=function(a){if(N(a)){var b=a;a=function(){return b}}else if(!M(a))throw new Error("'rule' must be a function");return k=a,this},this.when=function(a,b){var c,h=N(b);if(N(a)&&(a=d.compile(a)),!h&&!M(b)&&!P(b))throw new Error("invalid 'handler' in when()");var i={matcher:function(a,b){return h&&(c=d.compile(b),b=["$match",function(a){return c.format(a)}]),R(function(c,d){return g(c,b,a.exec(d.path(),d.search()))},{prefix:N(a.prefix)?a.prefix:""})},regex:function(a,b){if(a.global||a.sticky)throw new Error("when() RegExp must not be global or sticky");return h&&(c=b,b=["$match",function(a){return f(c,a)}]),R(function(c,d){return g(c,b,a.exec(d.path()))},{prefix:e(a)})}},j={matcher:d.isMatcher(a),regex:a instanceof RegExp};for(var k in j)if(j[k])return this.rule(i[k](a,b));throw new Error("invalid 'what' in when()")},this.deferIntercept=function(a){a===c&&(a=!0),l=a},this.$get=h,h.$inject=["$location","$rootScope","$injector","$browser","$sniffer"]}function v(a,e){function f(a){return 0===a.indexOf(".")||0===a.indexOf("^")}function m(a,b){if(!a)return c;var d=N(a),e=d?a:a.name,g=f(e);if(g){if(!b)throw new Error("No reference point given for path '"+e+"'");b=m(b);for(var h=e.split("."),i=0,j=h.length,k=b;j>i;i++)if(""!==h[i]||0!==i){if("^"!==h[i])break;if(!k.parent)throw new Error("Path '"+e+"' not valid for state '"+b.name+"'");k=k.parent}else k=b;h=h.slice(i).join("."),e=k.name+(k.name&&h?".":"")+h}var l=z[e];return!l||!d&&(d||l!==a&&l.self!==a)?c:l}function n(a,b){A[a]||(A[a]=[]),A[a].push(b)}function p(a){for(var b=A[a]||[];b.length;)q(b.shift())}function q(b){b=d(b,{self:b,resolve:b.resolve||{},toString:function(){return this.name}});var c=b.name;if(!N(c)||c.indexOf("@")>=0)throw new Error("State must have a valid name");if(z.hasOwnProperty(c))throw new Error("State '"+c+"' is already defined");var e=-1!==c.indexOf(".")?c.substring(0,c.lastIndexOf(".")):N(b.parent)?b.parent:O(b.parent)&&N(b.parent.name)?b.parent.name:"";if(e&&!z[e])return n(e,b.self);for(var f in C)M(C[f])&&(b[f]=C[f](b,C.$delegates[f]));return z[c]=b,!b[B]&&b.url&&a.when(b.url,["$match","$stateParams",function(a,c){y.$current.navigable==b&&j(a,c)||y.transitionTo(b,a,{inherit:!0,location:!1})}]),p(c),b}function r(a){return a.indexOf("*")>-1}function s(a){for(var b=a.split("."),c=y.$current.name.split("."),d=0,e=b.length;e>d;d++)"*"===b[d]&&(c[d]="*");return"**"===b[0]&&(c=c.slice(h(c,b[1])),c.unshift("**")),"**"===b[b.length-1]&&(c.splice(h(c,b[b.length-2])+1,Number.MAX_VALUE),c.push("**")),b.length!=c.length?!1:c.join("")===b.join("")}function t(a,b){return N(a)&&!L(b)?C[a]:M(b)&&N(a)?(C[a]&&!C.$delegates[a]&&(C.$delegates[a]=C[a]),C[a]=b,this):this}function u(a,b){return O(a)?b=a:b.name=a,q(b),this}function v(a,e,f,h,l,n,p,q,t){function u(b,c,d,f){var g=a.$broadcast("$stateNotFound",b,c,d);if(g.defaultPrevented)return p.update(),D;if(!g.retry)return null;if(f.$retry)return p.update(),E;var h=y.transition=e.when(g.retry);return h.then(function(){return h!==y.transition?A:(b.options.$retry=!0,y.transitionTo(b.to,b.toParams,b.options))},function(){return D}),p.update(),h}function v(a,c,d,g,i,j){function m(){var c=[];return Q(a.views,function(d,e){var g=d.resolve&&d.resolve!==a.resolve?d.resolve:{};g.$template=[function(){return f.load(e,{view:d,locals:i.globals,params:n,notify:j.notify})||""}],c.push(l.resolve(g,i.globals,i.resolve,a).then(function(c){if(M(d.controllerProvider)||P(d.controllerProvider)){var f=b.extend({},g,i.globals);c.$$controller=h.invoke(d.controllerProvider,null,f)}else c.$$controller=d.controller;c.$$state=a,c.$$controllerAs=d.controllerAs,i[e]=c}))}),e.all(c).then(function(){return i.globals})}var n=d?c:k(a.params.$$keys(),c),o={$stateParams:n};i.resolve=l.resolve(a.resolve,o,i.resolve,a);var p=[i.resolve.then(function(a){i.globals=a})];return g&&p.push(g),e.all(p).then(m).then(function(a){return i})}var A=e.reject(new Error("transition superseded")),C=e.reject(new Error("transition prevented")),D=e.reject(new Error("transition aborted")),E=e.reject(new Error("transition failed"));return x.locals={resolve:null,globals:{$stateParams:{}}},y={params:{},current:x.self,$current:x,transition:null},y.reload=function(a){return y.transitionTo(y.current,n,{reload:a||!0,inherit:!1,notify:!0})},y.go=function(a,b,c){return y.transitionTo(a,b,R({inherit:!0,relative:y.$current},c))},y.transitionTo=function(b,c,f){c=c||{},f=R({location:!0,inherit:!1,relative:null,notify:!0,reload:!1,$retry:!1},f||{});var g,j=y.$current,l=y.params,o=j.path,q=m(b,f.relative),r=c["#"];if(!L(q)){var s={to:b,toParams:c,options:f},t=u(s,j.self,l,f);if(t)return t;if(b=s.to,c=s.toParams,f=s.options,q=m(b,f.relative),!L(q)){if(!f.relative)throw new Error("No such state '"+b+"'");throw new Error("Could not resolve '"+b+"' from state '"+f.relative+"'")}}if(q[B])throw new Error("Cannot transition to abstract state '"+b+"'");if(f.inherit&&(c=i(n,c||{},y.$current,q)),!q.params.$$validates(c))return E;c=q.params.$$values(c),b=q;var z=b.path,D=0,F=z[D],G=x.locals,H=[];if(f.reload){if(N(f.reload)||O(f.reload)){if(O(f.reload)&&!f.reload.name)throw new Error("Invalid reload state object");var I=f.reload===!0?o[0]:m(f.reload);if(f.reload&&!I)throw new Error("No such reload state '"+(N(f.reload)?f.reload:f.reload.name)+"'");for(;F&&F===o[D]&&F!==I;)G=H[D]=F.locals,D++,F=z[D]}}else for(;F&&F===o[D]&&F.ownParams.$$equals(c,l);)G=H[D]=F.locals,D++,F=z[D];if(w(b,c,j,l,G,f))return r&&(c["#"]=r),y.params=c,S(y.params,n),S(k(b.params.$$keys(),n),b.locals.globals.$stateParams),f.location&&b.navigable&&b.navigable.url&&(p.push(b.navigable.url,c,{$$avoidResync:!0,replace:"replace"===f.location}),p.update(!0)),y.transition=null,e.when(y.current);if(c=k(b.params.$$keys(),c||{}),r&&(c["#"]=r),f.notify&&a.$broadcast("$stateChangeStart",b.self,c,j.self,l,f).defaultPrevented)return a.$broadcast("$stateChangeCancel",b.self,c,j.self,l),null==y.transition&&p.update(),C;for(var J=e.when(G),K=D;K<z.length;K++,F=z[K])G=H[K]=d(G),J=v(F,c,F===b,J,G,f);var M=y.transition=J.then(function(){var d,e,g;if(y.transition!==M)return A;for(d=o.length-1;d>=D;d--)g=o[d],g.self.onExit&&h.invoke(g.self.onExit,g.self,g.locals.globals),g.locals=null;for(d=D;d<z.length;d++)e=z[d],e.locals=H[d],e.self.onEnter&&h.invoke(e.self.onEnter,e.self,e.locals.globals);return y.transition!==M?A:(y.$current=b,y.current=b.self,y.params=c,S(y.params,n),y.transition=null,f.location&&b.navigable&&p.push(b.navigable.url,b.navigable.locals.globals.$stateParams,{$$avoidResync:!0,replace:"replace"===f.location}),f.notify&&a.$broadcast("$stateChangeSuccess",b.self,c,j.self,l),p.update(!0),y.current)},function(d){return y.transition!==M?A:(y.transition=null,g=a.$broadcast("$stateChangeError",b.self,c,j.self,l,d),g.defaultPrevented||p.update(),e.reject(d))});return M},y.is=function(a,b,d){d=R({relative:y.$current},d||{});var e=m(a,d.relative);return L(e)?y.$current!==e?!1:b?j(e.params.$$values(b),n):!0:c},y.includes=function(a,b,d){if(d=R({relative:y.$current},d||{}),N(a)&&r(a)){if(!s(a))return!1;a=y.$current.name}var e=m(a,d.relative);return L(e)?L(y.$current.includes[e.name])?b?j(e.params.$$values(b),n,g(b)):!0:!1:c},y.href=function(a,b,d){d=R({lossy:!0,inherit:!0,absolute:!1,relative:y.$current},d||{});var e=m(a,d.relative);if(!L(e))return null;d.inherit&&(b=i(n,b||{},y.$current,e));var f=e&&d.lossy?e.navigable:e;return f&&f.url!==c&&null!==f.url?p.href(f.url,k(e.params.$$keys().concat("#"),b||{}),{absolute:d.absolute}):null},y.get=function(a,b){if(0===arguments.length)return o(g(z),function(a){return z[a].self});var c=m(a,b||y.$current);return c&&c.self?c.self:null},y}function w(a,b,c,d,e,f){function g(a,b,c){function d(b){return"search"!=a.params[b].location}var e=a.params.$$keys().filter(d),f=l.apply({},[a.params].concat(e)),g=new U.ParamSet(f);return g.$$equals(b,c)}return!f.reload&&a===c&&(e===c.locals||a.self.reloadOnSearch===!1&&g(c,d,b))?!0:void 0}var x,y,z={},A={},B="abstract",C={parent:function(a){if(L(a.parent)&&a.parent)return m(a.parent);var b=/^(.+)\.[^.]+$/.exec(a.name);return b?m(b[1]):x},data:function(a){return a.parent&&a.parent.data&&(a.data=a.self.data=d(a.parent.data,a.data)),a.data},url:function(a){var b=a.url,c={params:a.params||{}};if(N(b))return"^"==b.charAt(0)?e.compile(b.substring(1),c):(a.parent.navigable||x).url.concat(b,c);if(!b||e.isMatcher(b))return b;throw new Error("Invalid url '"+b+"' in state '"+a+"'")},navigable:function(a){return a.url?a:a.parent?a.parent.navigable:null},ownParams:function(a){var b=a.url&&a.url.params||new U.ParamSet;return Q(a.params||{},function(a,c){b[c]||(b[c]=new U.Param(c,null,a,"config"))}),b},params:function(a){var b=l(a.ownParams,a.ownParams.$$keys());return a.parent&&a.parent.params?R(a.parent.params.$$new(),b):new U.ParamSet},views:function(a){var b={};return Q(L(a.views)?a.views:{"":a},function(c,d){d.indexOf("@")<0&&(d+="@"+a.parent.name),b[d]=c}),b},path:function(a){return a.parent?a.parent.path.concat(a):[]},includes:function(a){var b=a.parent?R({},a.parent.includes):{};return b[a.name]=!0,b},$delegates:{}};x=q({name:"",url:"^",views:null,"abstract":!0}),x.navigable=null,this.decorator=t,this.state=u,this.$get=v,v.$inject=["$rootScope","$q","$view","$injector","$resolve","$stateParams","$urlRouter","$location","$urlMatcherFactory"]}function w(){function a(a,b){return{load:function(a,c){var d,e={template:null,controller:null,view:null,locals:null,notify:!0,async:!0,params:{}};return c=R(e,c),c.view&&(d=b.fromConfig(c.view,c.params,c.locals)),d}}}this.$get=a,a.$inject=["$rootScope","$templateFactory"]}function x(){var a=!1;this.useAnchorScroll=function(){a=!0},this.$get=["$anchorScroll","$timeout",function(b,c){return a?b:function(a){return c(function(){a[0].scrollIntoView()},0,!1)}}]}function y(a,c,d,e){function f(){return c.has?function(a){return c.has(a)?c.get(a):null}:function(a){try{return c.get(a)}catch(b){return null}}}function g(a,c){function d(a){return 1===V&&W>=4?!!j.enabled(a):1===V&&W>=2?!!j.enabled():!!i}var e={enter:function(a,b,c){b.after(a),c()},leave:function(a,b){a.remove(),b()}};if(a.noanimation)return e;if(j)return{enter:function(a,c,f){d(a)?b.version.minor>2?j.enter(a,null,c).then(f):j.enter(a,null,c,f):e.enter(a,c,f)},leave:function(a,c){d(a)?b.version.minor>2?j.leave(a).then(c):j.leave(a,c):e.leave(a,c)}};if(i){var f=i&&i(c,a);return{enter:function(a,b,c){f.enter(a,null,b),c()},leave:function(a,b){f.leave(a),b()}}}return e}var h=f(),i=h("$animator"),j=h("$animate"),k={restrict:"ECA",terminal:!0,priority:400,transclude:"element",compile:function(c,f,h){return function(c,f,i){function j(){function a(){b&&b.remove(),c&&c.$destroy()}var b=l,c=n;c&&(c._willBeDestroyed=!0),m?(r.leave(m,function(){a(),l=null}),l=m):(a(),l=null),m=null,n=null}function k(g){var k,l=A(c,i,f,e),s=l&&a.$current&&a.$current.locals[l];if((g||s!==o)&&!c._willBeDestroyed){k=c.$new(),o=a.$current.locals[l],k.$emit("$viewContentLoading",l);var t=h(k,function(a){r.enter(a,f,function(){n&&n.$emit("$viewContentAnimationEnded"),(b.isDefined(q)&&!q||c.$eval(q))&&d(a)}),j()});m=t,n=k,n.$emit("$viewContentLoaded",l),n.$eval(p)}}var l,m,n,o,p=i.onload||"",q=i.autoscroll,r=g(i,c);c.$on("$stateChangeSuccess",function(){k(!1)}),k(!0)}}};return k}function z(a,b,c,d){return{restrict:"ECA",priority:-400,compile:function(e){var f=e.html();return function(e,g,h){var i=c.$current,j=A(e,h,g,d),k=i&&i.locals[j];if(k){g.data("$uiView",{name:j,state:k.$$state}),g.html(k.$template?k.$template:f);var l=a(g.contents());if(k.$$controller){k.$scope=e,k.$element=g;var m=b(k.$$controller,k);k.$$controllerAs&&(e[k.$$controllerAs]=m),g.data("$ngControllerController",m),g.children().data("$ngControllerController",m)}l(e)}}}}}function A(a,b,c,d){var e=d(b.uiView||b.name||"")(a),f=c.inheritedData("$uiView");return e.indexOf("@")>=0?e:e+"@"+(f?f.state.name:"")}function B(a,b){var c,d=a.match(/^\s*({[^}]*})\s*$/);if(d&&(a=b+"("+d[1]+")"),c=a.replace(/\n/g," ").match(/^([^(]+?)\s*(\((.*)\))?$/),!c||4!==c.length)throw new Error("Invalid state ref '"+a+"'");return{state:c[1],paramExpr:c[3]||null}}function C(a){var b=a.parent().inheritedData("$uiView");return b&&b.state&&b.state.name?b.state:void 0}function D(a){var b="[object SVGAnimatedString]"===Object.prototype.toString.call(a.prop("href")),c="FORM"===a[0].nodeName;return{attr:c?"action":b?"xlink:href":"href",isAnchor:"A"===a.prop("tagName").toUpperCase(),clickable:!c}}function E(a,b,c,d,e){return function(f){var g=f.which||f.button,h=e();if(!(g>1||f.ctrlKey||f.metaKey||f.shiftKey||a.attr("target"))){var i=c(function(){b.go(h.state,h.params,h.options)});f.preventDefault();var j=d.isAnchor&&!h.href?1:0;f.preventDefault=function(){j--<=0&&c.cancel(i)}}}}function F(a,b){return{relative:C(a)||b.$current,inherit:!0}}function G(a,c){return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(d,e,f,g){var h=B(f.uiSref,a.current.name),i={state:h.state,href:null,params:null},j=D(e),k=g[1]||g[0];i.options=R(F(e,a),f.uiSrefOpts?d.$eval(f.uiSrefOpts):{});var l=function(c){c&&(i.params=b.copy(c)),i.href=a.href(h.state,i.params,i.options),k&&k.$$addStateInfo(h.state,i.params),null!==i.href&&f.$set(j.attr,i.href)};h.paramExpr&&(d.$watch(h.paramExpr,function(a){a!==i.params&&l(a)},!0),i.params=b.copy(d.$eval(h.paramExpr))),l(),j.clickable&&e.bind("click",E(e,a,c,j,function(){return i}))}}}function H(a,b){return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(c,d,e,f){function g(b){l.state=b[0],l.params=b[1],l.options=b[2],l.href=a.href(l.state,l.params,l.options),i&&i.$$addStateInfo(l.state,l.params),l.href&&e.$set(h.attr,l.href)}var h=D(d),i=f[1]||f[0],j=[e.uiState,e.uiStateParams||null,e.uiStateOpts||null],k="["+j.map(function(a){return a||"null"}).join(", ")+"]",l={state:null,params:null,options:null,href:null};c.$watch(k,g,!0),g(c.$eval(k)),h.clickable&&d.bind("click",E(d,a,b,h,function(){return l}))}}}function I(a,b,c){return{restrict:"A",controller:["$scope","$element","$attrs","$timeout",function(b,d,e,f){function g(b,c,e){var f=a.get(b,C(d)),g=h(b,c);p.push({state:f||{name:b},params:c,hash:g}),q[g]=e}function h(a,c){if(!N(a))throw new Error("state should be a string");return O(c)?a+T(c):(c=b.$eval(c),O(c)?a+T(c):a)}function i(){for(var a=0;a<p.length;a++)l(p[a].state,p[a].params)?j(d,q[p[a].hash]):k(d,q[p[a].hash]),m(p[a].state,p[a].params)?j(d,n):k(d,n)}function j(a,b){f(function(){a.addClass(b)})}function k(a,b){a.removeClass(b)}function l(b,c){return a.includes(b.name,c)}function m(b,c){return a.is(b.name,c)}var n,o,p=[],q={};n=c(e.uiSrefActiveEq||"",!1)(b);try{o=b.$eval(e.uiSrefActive)}catch(r){}o=o||c(e.uiSrefActive||"",!1)(b),O(o)&&Q(o,function(c,d){if(N(c)){var e=B(c,a.current.name);g(e.state,b.$eval(e.paramExpr),d)}}),this.$$addStateInfo=function(a,b){O(o)&&p.length>0||(g(a,b,o),i())},b.$on("$stateChangeSuccess",i),i()}]}}function J(a){var b=function(b,c){return a.is(b,c)};return b.$stateful=!0,b}function K(a){var b=function(b,c,d){return a.includes(b,c,d)};return b.$stateful=!0,b}var L=b.isDefined,M=b.isFunction,N=b.isString,O=b.isObject,P=b.isArray,Q=b.forEach,R=b.extend,S=b.copy,T=b.toJson;b.module("ui.router.util",["ng"]),b.module("ui.router.router",["ui.router.util"]),b.module("ui.router.state",["ui.router.router","ui.router.util"]),b.module("ui.router",["ui.router.state"]),b.module("ui.router.compat",["ui.router"]),p.$inject=["$q","$injector"],b.module("ui.router.util").service("$resolve",p),q.$inject=["$http","$templateCache","$injector"],b.module("ui.router.util").service("$templateFactory",q);var U;r.prototype.concat=function(a,b){var c={caseInsensitive:U.caseInsensitive(),strict:U.strictMode(),squash:U.defaultSquashPolicy()};return new r(this.sourcePath+a+this.sourceSearch,R(c,b),this)},r.prototype.toString=function(){return this.source},r.prototype.exec=function(a,b){function c(a){function b(a){return a.split("").reverse().join("")}function c(a){return a.replace(/\\-/g,"-")}var d=b(a).split(/-(?!\\)/),e=o(d,b);return o(e,c).reverse()}var d=this.regexp.exec(a);if(!d)return null;b=b||{};var e,f,g,h=this.parameters(),i=h.length,j=this.segments.length-1,k={};if(j!==d.length-1)throw new Error("Unbalanced capture group in route '"+this.source+"'");var l,m;for(e=0;j>e;e++){for(g=h[e],l=this.params[g],m=d[e+1],f=0;f<l.replace.length;f++)l.replace[f].from===m&&(m=l.replace[f].to);m&&l.array===!0&&(m=c(m)),L(m)&&(m=l.type.decode(m)),k[g]=l.value(m)}for(;i>e;e++){for(g=h[e],k[g]=this.params[g].value(b[g]),l=this.params[g],m=b[g],f=0;f<l.replace.length;f++)l.replace[f].from===m&&(m=l.replace[f].to);L(m)&&(m=l.type.decode(m)),k[g]=l.value(m)}return k},r.prototype.parameters=function(a){return L(a)?this.params[a]||null:this.$$paramNames},r.prototype.validates=function(a){return this.params.$$validates(a)},r.prototype.format=function(a){function b(a){return encodeURIComponent(a).replace(/-/g,function(a){return"%5C%"+a.charCodeAt(0).toString(16).toUpperCase()})}a=a||{};var c=this.segments,d=this.parameters(),e=this.params;if(!this.validates(a))return null;var f,g=!1,h=c.length-1,i=d.length,j=c[0];for(f=0;i>f;f++){var k=h>f,l=d[f],m=e[l],n=m.value(a[l]),p=m.isOptional&&m.type.equals(m.value(),n),q=p?m.squash:!1,r=m.type.encode(n);if(k){var s=c[f+1],t=f+1===h;if(q===!1)null!=r&&(j+=P(r)?o(r,b).join("-"):encodeURIComponent(r)),j+=s;else if(q===!0){var u=j.match(/\/$/)?/\/?(.*)/:/(.*)/;j+=s.match(u)[1]}else N(q)&&(j+=q+s);t&&m.squash===!0&&"/"===j.slice(-1)&&(j=j.slice(0,-1))}else{if(null==r||p&&q!==!1)continue;if(P(r)||(r=[r]),0===r.length)continue;r=o(r,encodeURIComponent).join("&"+l+"="),j+=(g?"&":"?")+(l+"="+r),g=!0}}return j},s.prototype.is=function(a,b){return!0},s.prototype.encode=function(a,b){return a},s.prototype.decode=function(a,b){return a},s.prototype.equals=function(a,b){return a==b},s.prototype.$subPattern=function(){var a=this.pattern.toString();return a.substr(1,a.length-2)},s.prototype.pattern=/.*/,s.prototype.toString=function(){return"{Type:"+this.name+"}"},s.prototype.$normalize=function(a){return this.is(a)?a:this.decode(a)},s.prototype.$asArray=function(a,b){function d(a,b){function d(a,b){return function(){return a[b].apply(a,arguments)}}function e(a){return P(a)?a:L(a)?[a]:[]}function f(a){switch(a.length){case 0:return c;case 1:return"auto"===b?a[0]:a;default:return a}}function g(a){return!a}function h(a,b){return function(c){if(P(c)&&0===c.length)return c;c=e(c);var d=o(c,a);return b===!0?0===n(d,g).length:f(d)}}function i(a){return function(b,c){var d=e(b),f=e(c);if(d.length!==f.length)return!1;for(var g=0;g<d.length;g++)if(!a(d[g],f[g]))return!1;return!0}}this.encode=h(d(a,"encode")),this.decode=h(d(a,"decode")),this.is=h(d(a,"is"),!0),this.equals=i(d(a,"equals")),this.pattern=a.pattern,this.$normalize=h(d(a,"$normalize")),this.name=a.name,this.$arrayMode=b}if(!a)return this;if("auto"===a&&!b)throw new Error("'auto' array mode is for query parameters only");return new d(this,a)},b.module("ui.router.util").provider("$urlMatcherFactory",t),b.module("ui.router.util").run(["$urlMatcherFactory",function(a){}]),u.$inject=["$locationProvider","$urlMatcherFactoryProvider"],b.module("ui.router.router").provider("$urlRouter",u),v.$inject=["$urlRouterProvider","$urlMatcherFactoryProvider"],b.module("ui.router.state").factory("$stateParams",function(){return{}}).provider("$state",v),w.$inject=[],b.module("ui.router.state").provider("$view",w),b.module("ui.router.state").provider("$uiViewScroll",x);var V=b.version.major,W=b.version.minor;y.$inject=["$state","$injector","$uiViewScroll","$interpolate"],z.$inject=["$compile","$controller","$state","$interpolate"],b.module("ui.router.state").directive("uiView",y),b.module("ui.router.state").directive("uiView",z),G.$inject=["$state","$timeout"],H.$inject=["$state","$timeout"],I.$inject=["$state","$stateParams","$interpolate"],b.module("ui.router.state").directive("uiSref",G).directive("uiSrefActive",I).directive("uiSrefActiveEq",I).directive("uiState",H),J.$inject=["$state"],K.$inject=["$state"],b.module("ui.router.state").filter("isState",J).filter("includedByState",K)}(window,window.angular),"function"!=typeof angular.element.prototype.outerHeight&&(angular.element.prototype.outerHeight=function(){function a(a){return"px"===a.slice(-2)?parseFloat(a.slice(0,-2)):0}var b,c=!1,d=this.eq(0),e=d[0];return arguments[0]===!0||arguments[0]===!1||void 0===arguments[0]?d.length?(c=arguments[0]&&!0||!1,b=e.outerHeight?e.outerHeight:e.offsetHeight,c&&(b+=a(d.css("marginTop"))+a(d.css("marginBottom"))),b):0:d.length?(b=parseFloat(arguments[0]),c=arguments[1]&&!0||!1,c&&(b-=a(d.css("marginTop"))+a(d.css("marginBottom"))),b-=a(d.css("borderTopWidth"))+a(d.css("borderBottomWidth"))+a(d.css("paddingTop"))+a(d.css("paddingBottom")),d.css("height",b+"px"),this):this}),angular.module("ngWig",["ngwig-app-templates"]),angular.module("ngWig").directive("ngWig",function(){return{scope:{content:"=ngWig",debug:"&",cssPath:"@"},restrict:"A",replace:!0,templateUrl:"ng-wig/views/ng-wig.html",link:function(a,b,c){a.originalHeight=b.outerHeight(),a.editMode=!1,a.autoexpand=!("autoexpand"in c)||"off"!==c.autoexpand,a.cssPath=a.cssPath?a.cssPath:"css/ng-wig.css",a.toggleEditMode=function(){a.editMode=!a.editMode},a.execCommand=function(b,c){"createlink"===b&&(c=prompt("Please enter the URL","http://")),a.$emit("execCommand",{command:b,options:c})},a.resizeEditor=function(a){var c=b.children();for(var d in c){var e=c.eq(d);if(e.hasClass("nw-editor")){e.outerHeight(a);break}}}}}}),angular.module("ngWig").directive("ngWigEditable",function(){function a(a,b,c,d){function e(){if(a.autoexpand)b=angular.element(g.documentElement).outerHeight();else var b=a.originalHeight;a.resizeEditor(b)}var f,g=b[0].contentDocument;g.open(),g.write('<!DOCTYPE html><html style="height:100%"><head>'+(a.cssPath?'<link href="'+a.cssPath+'" rel="stylesheet" type="text/css">':"")+'</head><body contenteditable="true" style="height:100%; margin: 0; padding: 8px;box-sizing: border-box;"></body></html>'),g.close(),f=angular.element(b[0].contentDocument.body),d.$render=function(){f[0].innerHTML=d.$viewValue||""},f.bind("blur keyup change paste",function(){e(),a.$apply(function(){d.$setViewValue(f.html())})}),a.$on("execCommand",function(b,c){var h=g.selection,i=c.command,j=c.options;
if(h){var k=h.createRange();g.execCommand(i,!1,j),k.collapse(!1),k.select()}else g.execCommand(i,!1,j);g.body.focus(),a.$evalAsync(function(){d.$setViewValue(f.html()),e()})}),a.$watch("autoexpand",e),a.$watch("editMode",function(a,b){b&&e()})}return{restrict:"A",require:"ngModel",replace:!0,link:a}}),angular.module("ngwig-app-templates",["ng-wig/views/ng-wig.html"]),angular.module("ng-wig/views/ng-wig.html",[]).run(["$templateCache",function(a){a.put("ng-wig/views/ng-wig.html",'<div class="ng-wig">\n  <ul class="nw-toolbar">\n    <li class="nw-toolbar__item">\n      <button type="button" class="nw-button nw-button--header-one" title="Header" ng-click="execCommand(\'formatblock\', \'<h1>\')"></button>\n    </li><!--\n    --><li class="nw-toolbar__item">\n      <button type="button" class="nw-button nw-button--paragraph" title="Paragraph" ng-click="execCommand(\'formatblock\', \'<p>\')"></button>\n    </li><!--\n    --><li class="nw-toolbar__item">\n      <button type="button" class="nw-button nw-button--unordered-list" title="Unordered List" ng-click="execCommand(\'insertunorderedlist\')"></button>\n    </li><!--\n    --><li class="nw-toolbar__item">\n      <button type="button" class="nw-button nw-button--ordered-list" title="Ordered List" ng-click="execCommand(\'insertorderedlist\')"></button>\n    </li><!--\n    --><li class="nw-toolbar__item">\n      <button type="button" class="nw-button nw-button--bold" title="Bold" ng-click="execCommand(\'bold\')"></button>\n    </li><!--\n    --><li class="nw-toolbar__item">\n      <button type="button" class="nw-button nw-button--italic" title="Italic" ng-click="execCommand(\'italic\')"></button>\n    </li><!--\n    --><li class="nw-toolbar__item">\n      <button type="button" class="nw-button nw-button--link" title="link" ng-click="execCommand(\'createlink\')"></button>\n    </li><!--\n    --><li class="nw-toolbar__item">\n      <button type="button" class="nw-button nw-button--source" ng-class="{ \'nw-button--active\': editMode }" ng-click="toggleEditMode()"></button>\n    </li>\n  </ul>\n\n  <div class="nw-editor">\n    <textarea class="nw-editor__src" ng-show="editMode" ng-model="content"></textarea>\n    <iframe scrolling="{{ autoexpand ? \'no\' : \'yes\' }}" class="nw-editor__res" frameBorder="0" ng-hide="editMode" ng-model="content" ng-wig-editable></iframe>\n  </div>\n</div>\n')}]);var a=function(a){return.5>a?Math.pow(2*a,2)/2:1-Math.pow(2*(1-a),2)/2};angular.module("duScroll",["duScroll.scrollspy","duScroll.smoothScroll","duScroll.scrollContainer","duScroll.spyContext","duScroll.scrollHelpers"]).value("duScrollDuration",350).value("duScrollSpyWait",100).value("duScrollGreedy",!1).value("duScrollOffset",0).value("duScrollEasing",a),angular.module("duScroll.scrollHelpers",["duScroll.requestAnimation"]).run(["$window","$q","cancelAnimation","requestAnimation","duScrollEasing","duScrollDuration","duScrollOffset",function(a,b,c,d,e,f,g){var h={},i=function(a){return"undefined"!=typeof HTMLDocument&&a instanceof HTMLDocument||a.nodeType&&a.nodeType===a.DOCUMENT_NODE},j=function(a){return"undefined"!=typeof HTMLElement&&a instanceof HTMLElement||a.nodeType&&a.nodeType===a.ELEMENT_NODE},k=function(a){return j(a)||i(a)?a:a[0]};h.duScrollTo=function(b,c,d,e){var f;if(angular.isElement(b)?f=this.duScrollToElement:angular.isDefined(d)&&(f=this.duScrollToAnimated),f)return f.apply(this,arguments);var g=k(this);return i(g)?a.scrollTo(b,c):(g.scrollLeft=b,void(g.scrollTop=c))};var l,m;h.duScrollToAnimated=function(a,f,g,h){g&&!h&&(h=e);var i=this.duScrollLeft(),j=this.duScrollTop(),k=Math.round(a-i),n=Math.round(f-j),o=null,p=0,q=this,r="scroll mousedown mousewheel touchmove keydown",s=function(a){(!a||p&&a.which>0)&&(q.unbind(r,s),c(l),m.reject(),l=null)};if(l&&s(),m=b.defer(),0===g||!k&&!n)return 0===g&&q.duScrollTo(a,f),m.resolve(),m.promise;var t=function(a){null===o&&(o=a),p=a-o;var b=p>=g?1:h(p/g);q.scrollTo(i+Math.ceil(k*b),j+Math.ceil(n*b)),1>b?l=d(t):(q.unbind(r,s),l=null,m.resolve())};return q.duScrollTo(i,j),q.bind(r,s),l=d(t),m.promise},h.duScrollToElement=function(a,b,c,d){var e=k(this);angular.isNumber(b)&&!isNaN(b)||(b=g);var f=this.duScrollTop()+k(a).getBoundingClientRect().top-b;return j(e)&&(f-=e.getBoundingClientRect().top),this.duScrollTo(0,f,c,d)},h.duScrollLeft=function(b,c,d){if(angular.isNumber(b))return this.duScrollTo(b,this.duScrollTop(),c,d);var e=k(this);return i(e)?a.scrollX||document.documentElement.scrollLeft||document.body.scrollLeft:e.scrollLeft},h.duScrollTop=function(b,c,d){if(angular.isNumber(b))return this.duScrollTo(this.duScrollLeft(),b,c,d);var e=k(this);return i(e)?a.scrollY||document.documentElement.scrollTop||document.body.scrollTop:e.scrollTop},h.duScrollToElementAnimated=function(a,b,c,d){return this.duScrollToElement(a,b,c||f,d)},h.duScrollTopAnimated=function(a,b,c){return this.duScrollTop(a,b||f,c)},h.duScrollLeftAnimated=function(a,b,c){return this.duScrollLeft(a,b||f,c)},angular.forEach(h,function(a,b){angular.element.prototype[b]=a;var c=b.replace(/^duScroll/,"scroll");angular.isUndefined(angular.element.prototype[c])&&(angular.element.prototype[c]=a)})}]),angular.module("duScroll.polyfill",[]).factory("polyfill",["$window",function(a){var b=["webkit","moz","o","ms"];return function(c,d){if(a[c])return a[c];for(var e,f=c.substr(0,1).toUpperCase()+c.substr(1),g=0;g<b.length;g++)if(e=b[g]+f,a[e])return a[e];return d}}]),angular.module("duScroll.requestAnimation",["duScroll.polyfill"]).factory("requestAnimation",["polyfill","$timeout",function(a,b){var c=0,d=function(a,d){var e=(new Date).getTime(),f=Math.max(0,16-(e-c)),g=b(function(){a(e+f)},f);return c=e+f,g};return a("requestAnimationFrame",d)}]).factory("cancelAnimation",["polyfill","$timeout",function(a,b){var c=function(a){b.cancel(a)};return a("cancelAnimationFrame",c)}]),angular.module("duScroll.spyAPI",["duScroll.scrollContainerAPI"]).factory("spyAPI",["$rootScope","$timeout","$window","$document","scrollContainerAPI","duScrollGreedy","duScrollSpyWait",function(a,b,c,d,e,f,g){var h=function(e){var h=!1,i=!1,j=function(){i=!1;var b,g=e.container,h=g[0],j=0;"undefined"!=typeof HTMLElement&&h instanceof HTMLElement||h.nodeType&&h.nodeType===h.ELEMENT_NODE?(j=h.getBoundingClientRect().top,b=Math.round(h.scrollTop+h.clientHeight)>=h.scrollHeight):b=Math.round(c.pageYOffset+c.innerHeight)>=d[0].body.scrollHeight;var k,l,m,n,o,p,q=b?"bottom":"top";for(n=e.spies,l=e.currentlyActive,m=void 0,k=0;k<n.length;k++)o=n[k],p=o.getTargetPosition(),p&&(b||p.top+o.offset-j<20&&(f||-1*p.top+j)<p.height)&&(!m||m[q]<p[q])&&(m={spy:o},m[q]=p[q]);m&&(m=m.spy),l===m||f&&!m||(l&&(l.$element.removeClass("active"),a.$broadcast("duScrollspy:becameInactive",l.$element)),m&&(m.$element.addClass("active"),a.$broadcast("duScrollspy:becameActive",m.$element)),e.currentlyActive=m)};return g?function(){h?i=!0:(j(),h=b(function(){h=!1,i&&j()},g,!1))}:j},i={},j=function(a){var b=a.$id,c={spies:[]};return c.handler=h(c),i[b]=c,a.$on("$destroy",function(){k(a)}),b},k=function(a){var b=a.$id,c=i[b],d=c.container;d&&d.off("scroll",c.handler),delete i[b]},l=j(a),m=function(a){return i[a.$id]?i[a.$id]:a.$parent?m(a.$parent):i[l]},n=function(a){var b,c,d=a.$scope;if(d)return m(d);for(c in i)if(b=i[c],-1!==b.spies.indexOf(a))return b},o=function(a){for(;a.parentNode;)if(a=a.parentNode,a===document)return!0;return!1},p=function(a){var b=n(a);b&&(b.spies.push(a),b.container&&o(b.container)||(b.container&&b.container.off("scroll",b.handler),b.container=e.getContainer(a.$scope),b.container.on("scroll",b.handler).triggerHandler("scroll")))},q=function(a){var b=n(a);a===b.currentlyActive&&(b.currentlyActive=null);var c=b.spies.indexOf(a);-1!==c&&b.spies.splice(c,1),a.$element=null};return{addSpy:p,removeSpy:q,createContext:j,destroyContext:k,getContextForScope:m}}]),angular.module("duScroll.scrollContainerAPI",[]).factory("scrollContainerAPI",["$document",function(a){var b={},c=function(a,c){var d=a.$id;return b[d]=c,d},d=function(a){return b[a.$id]?a.$id:a.$parent?d(a.$parent):void 0},e=function(c){var e=d(c);return e?b[e]:a},f=function(a){var c=d(a);c&&delete b[c]};return{getContainerId:d,getContainer:e,setContainer:c,removeContainer:f}}]),angular.module("duScroll.smoothScroll",["duScroll.scrollHelpers","duScroll.scrollContainerAPI"]).directive("duSmoothScroll",["duScrollDuration","duScrollOffset","scrollContainerAPI",function(a,b,c){return{link:function(d,e,f){e.on("click",function(e){if(f.href&&-1!==f.href.indexOf("#")){var g=document.getElementById(f.href.replace(/.*(?=#[^\s]+$)/,"").substring(1));if(g&&g.getBoundingClientRect){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault();var h=f.offset?parseInt(f.offset,10):b,i=f.duration?parseInt(f.duration,10):a,j=c.getContainer(d);j.duScrollToElement(angular.element(g),isNaN(h)?0:h,isNaN(i)?0:i)}}})}}}]),angular.module("duScroll.spyContext",["duScroll.spyAPI"]).directive("duSpyContext",["spyAPI",function(a){return{restrict:"A",scope:!0,compile:function(b,c,d){return{pre:function(b,c,d,e){a.createContext(b)}}}}}]),angular.module("duScroll.scrollContainer",["duScroll.scrollContainerAPI"]).directive("duScrollContainer",["scrollContainerAPI",function(a){return{restrict:"A",scope:!0,compile:function(b,c,d){return{pre:function(b,c,d,e){d.$observe("duScrollContainer",function(d){angular.isString(d)&&(d=document.getElementById(d)),d=angular.isElement(d)?angular.element(d):c,a.setContainer(b,d),b.$on("$destroy",function(){a.removeContainer(b)})})}}}}}]),angular.module("duScroll.scrollspy",["duScroll.spyAPI"]).directive("duScrollspy",["spyAPI","duScrollOffset","$timeout","$rootScope",function(a,b,c,d){var e=function(a,b,c,d){angular.isElement(a)?this.target=a:angular.isString(a)&&(this.targetId=a),this.$scope=b,this.$element=c,this.offset=d};return e.prototype.getTargetElement=function(){return!this.target&&this.targetId&&(this.target=document.getElementById(this.targetId)),this.target},e.prototype.getTargetPosition=function(){var a=this.getTargetElement();return a?a.getBoundingClientRect():void 0},e.prototype.flushTargetCache=function(){this.targetId&&(this.target=void 0)},{link:function(f,g,h){var i,j=h.ngHref||h.href;j&&-1!==j.indexOf("#")?i=j.replace(/.*(?=#[^\s]+$)/,"").substring(1):h.duScrollspy&&(i=h.duScrollspy),i&&c(function(){var c=new e(i,f,g,-(h.offset?parseInt(h.offset,10):b));a.addSpy(c),f.$on("$destroy",function(){a.removeSpy(c)}),f.$on("$locationChangeSuccess",c.flushTargetCache.bind(c)),d.$on("$stateChangeSuccess",c.flushTargetCache.bind(c))},0,!1)}}}]),function(){angular.module("angular-loading-bar",["cfp.loadingBarInterceptor"]),angular.module("chieffancypants.loadingBar",["cfp.loadingBarInterceptor"]),angular.module("cfp.loadingBarInterceptor",["cfp.loadingBar"]).config(["$httpProvider",function(a){var b=["$q","$cacheFactory","$timeout","$rootScope","cfpLoadingBar",function(b,c,d,e,f){function g(){d.cancel(i),f.complete(),k=0,j=0}function h(b){var d,e=c.get("$http"),f=a.defaults;!b.cache&&!f.cache||b.cache===!1||"GET"!==b.method&&"JSONP"!==b.method||(d=angular.isObject(b.cache)?b.cache:angular.isObject(f.cache)?f.cache:e);var g=void 0!==d?void 0!==d.get(b.url):!1;return void 0!==b.cached&&g!==b.cached?b.cached:(b.cached=g,g)}var i,j=0,k=0,l=f.latencyThreshold;return{request:function(a){return a.ignoreLoadingBar||h(a)||(e.$broadcast("cfpLoadingBar:loading",{url:a.url}),0===j&&(i=d(function(){f.start()},l)),j++,f.set(k/j)),a},response:function(a){return a.config.ignoreLoadingBar||h(a.config)||(k++,e.$broadcast("cfpLoadingBar:loaded",{url:a.config.url}),k>=j?g():f.set(k/j)),a},responseError:function(a){return a.config.ignoreLoadingBar||h(a.config)||(k++,e.$broadcast("cfpLoadingBar:loaded",{url:a.config.url}),k>=j?g():f.set(k/j)),b.reject(a)}}}];a.interceptors.push(b)}]),angular.module("cfp.loadingBar",[]).provider("cfpLoadingBar",function(){this.includeSpinner=!0,this.includeBar=!0,this.latencyThreshold=100,this.startSize=.02,this.parentSelector="body",this.spinnerTemplate='<div id="loading-bar-spinner"><div class="spinner-icon"></div></div>',this.loadingBarTemplate='<div id="loading-bar"><div class="bar"><div class="peg"></div></div></div>',this.$get=["$injector","$document","$timeout","$rootScope",function(a,b,c,d){function e(){k||(k=a.get("$animate"));var e=b.find(n).eq(0);c.cancel(m),r||(d.$broadcast("cfpLoadingBar:started"),r=!0,u&&k.enter(o,e),t&&k.enter(q,e),f(v))}function f(a){if(r){var b=100*a+"%";p.css("width",b),s=a,c.cancel(l),l=c(function(){g()},250)}}function g(){if(!(h()>=1)){var a=0,b=h();a=b>=0&&.25>b?(3*Math.random()+3)/100:b>=.25&&.65>b?3*Math.random()/100:b>=.65&&.9>b?2*Math.random()/100:b>=.9&&.99>b?.005:0;var c=h()+a;f(c)}}function h(){return s}function i(){s=0,r=!1}function j(){k||(k=a.get("$animate")),d.$broadcast("cfpLoadingBar:completed"),f(1),c.cancel(m),m=c(function(){var a=k.leave(o,i);a&&a.then&&a.then(i),k.leave(q)},500)}var k,l,m,n=this.parentSelector,o=angular.element(this.loadingBarTemplate),p=o.find("div").eq(0),q=angular.element(this.spinnerTemplate),r=!1,s=0,t=this.includeSpinner,u=this.includeBar,v=this.startSize;return{start:e,set:f,status:h,inc:g,complete:j,includeSpinner:this.includeSpinner,latencyThreshold:this.latencyThreshold,parentSelector:this.parentSelector,startSize:this.startSize}}]})}(),function(a){var b=a.module("datePicker",[]);b.constant("datePickerConfig",{template:"templates/datepicker.html",view:"month",views:["year","month","date","hours","minutes"],step:5}),b.filter("time",function(){function a(a){return("0"+a.getHours()).slice(-2)+":"+("0"+a.getMinutes()).slice(-2)}return function(b){return b instanceof Date||(b=new Date(b),!isNaN(b.getTime()))?a(b):void 0}}),b.directive("datePicker",["datePickerConfig","datePickerUtils",function(b,c){return{require:"?ngModel",template:'<div ng-include="template"></div>',scope:{model:"=datePicker",after:"=?",before:"=?"},link:function(d,e,f,g){function h(){var a=d.view;d.model&&!j&&(d.date=new Date(d.model),j=!1);var b=d.date;switch(a){case"year":d.years=c.getVisibleYears(b);break;case"month":d.months=c.getVisibleMonths(b);break;case"date":d.weekdays=d.weekdays||c.getDaysOfWeek(),d.weeks=c.getVisibleWeeks(b);break;case"hours":d.hours=c.getVisibleHours(b);break;case"minutes":d.minutes=c.getVisibleMinutes(b,k)}}function i(){return"date"!==d.view?d.view:d.date?d.date.getMonth():null}var j=!1;d.date=new Date(d.model||new Date),d.views=b.views.concat(),d.view=f.view||b.view,d.now=new Date,d.template=f.template||b.template,d.watchDirectChanges=void 0!==f.watchDirectChanges,d.callbackOnSetDate=f.onSetDate?_.get(d.$parent,f.onSetDate):void 0;var k=parseInt(f.step||b.step,10),l=!!f.partial;if(g){if(a.isDefined(f.minDate)){var m;g.$validators.min=function(b){return!c.isValidDate(b)||a.isUndefined(m)||b>=m},f.$observe("minDate",function(a){m=new Date(a),g.$validate()})}if(a.isDefined(f.maxDate)){var n;g.$validators.max=function(b){return!c.isValidDate(b)||a.isUndefined(n)||n>=b},f.$observe("maxDate",function(a){n=new Date(a),g.$validate()})}}d.views=d.views.slice(d.views.indexOf(f.maxView||"year"),d.views.indexOf(f.minView||"minutes")+1),1!==d.views.length&&-1!==d.views.indexOf(d.view)||(d.view=d.views[0]),d.setView=function(a){-1!==d.views.indexOf(a)&&(d.view=a)},d.setDate=function(a){if(!f.disabled){d.date=a;var b=d.views[d.views.indexOf(d.view)+1];if(!b||l||d.model){d.model=new Date(d.model||a),g&&g.$setViewValue(d.date);var c=l?"minutes":d.view;switch(c){case"minutes":d.model.setMinutes(a.getMinutes());case"hours":d.model.setHours(a.getHours());case"date":d.model.setFullYear(a.getFullYear()),d.model.setMonth(a.getMonth()),d.model.setDate(a.getDate());break;case"month":d.model.setMonth(a.getMonth());case"year":d.model.setFullYear(a.getFullYear())}!b&&d.model&&(d.$emit("setMaxDate",f.datePicker,d.model,d.view),d.callbackOnSetDate&&d.callbackOnSetDate()),d.$emit("setDate",d.model,d.view)}b&&d.setView(b),b||"true"!==f.autoClose||(e.addClass("hidden"),d.$emit("hidePicker"))}},d.$watch(i,h),d.watchDirectChanges&&d.$watch("model",function(){j=!1,h()}),d.next=function(a){var b=d.date;switch(a=a||1,d.view){case"year":case"month":b.setFullYear(b.getFullYear()+a);break;case"date":b.setMonth(b.getMonth()+a);break;case"hours":case"minutes":b.setHours(b.getHours()+a)}j=!0,h()},d.prev=function(a){return d.next(-a||-1)},d.isAfter=function(a){return d.after&&c.isAfter(a,d.after)},d.isBefore=function(a){return d.before&&c.isBefore(a,d.before)},d.isSameMonth=function(a){return c.isSameMonth(d.model,a)},d.isSameYear=function(a){return c.isSameYear(d.model,a)},d.isSameDay=function(a){return c.isSameDay(d.model,a)},d.isSameHour=function(a){return c.isSameHour(d.model,a)},d.isSameMinutes=function(a){return c.isSameMinutes(d.model,a)},d.isNow=function(a){var b=!0,c=d.now;switch(d.view){case"minutes":b&=~~(a.getMinutes()/k)===~~(c.getMinutes()/k);case"hours":b&=a.getHours()===c.getHours();case"date":b&=a.getDate()===c.getDate();case"month":b&=a.getMonth()===c.getMonth();case"year":b&=a.getFullYear()===c.getFullYear()}return b}}}}]),a.module("datePicker").factory("datePickerUtils",function(){var a=function(a,b,c,d,e){return new Date(0|a,0|b,0|c,0|d,0|e)};return{getVisibleMinutes:function(b,c){b=new Date(b||new Date);var d,e,f=b.getFullYear(),g=b.getMonth(),h=b.getDate(),i=b.getHours(),j=[];for(d=0;60>d;d+=c)e=a(f,g,h,i,d),j.push(e);return j},getVisibleWeeks:function(a){a=new Date(a||new Date);var b=a.getMonth(),c=a.getYear();a.setDate(1),0===a.getDay()?a.setDate(-5):a.setDate(a.getDate()-(a.getDay()-1)),1===a.getDate()&&a.setDate(-6);for(var d,e=[];e.length<6&&!(a.getYear()===c&&a.getMonth()>b);)d=this.getDaysOfWeek(a),e.push(d),a.setDate(a.getDate()+7);return e},getVisibleYears:function(b){b=new Date(b||new Date),b.setFullYear(b.getFullYear()-b.getFullYear()%10);for(var c,d=b.getFullYear(),e=[],f=0;12>f;f++)c=a(d),e.push(c),d++;return e},getDaysOfWeek:function(b){b=new Date(b||new Date),b.setDate(b.getDate()-(b.getDay()-1));for(var c,d=b.getFullYear(),e=b.getMonth(),f=b.getDate(),g=[],h=0;7>h;h++)c=a(d,e,f),g.push(c),f++;return g},getVisibleMonths:function(b){b=new Date(b||new Date);for(var c,d=b.getFullYear(),e=[],f=0;12>f;f++)c=a(d,f,1),e.push(c);return e},getVisibleHours:function(b){b=new Date(b||new Date);var c,d,e=b.getFullYear(),f=b.getMonth(),g=b.getDate(),h=[];for(c=0;24>c;c++)d=a(e,f,g,c),h.push(d);return h},isAfter:function(a,b){return a=void 0!==a?new Date(a):a,b=new Date(b),a&&a.getTime()>=b.getTime()},isBefore:function(a,b){return a=void 0!==a?new Date(a):a,b=new Date(b),a.getTime()<=b.getTime()},isSameYear:function(a,b){return a=void 0!==a?new Date(a):a,b=new Date(b),a&&a.getFullYear()===b.getFullYear()},isSameMonth:function(a,b){return a=void 0!==a?new Date(a):a,b=new Date(b),this.isSameYear(a,b)&&a.getMonth()===b.getMonth()},isSameDay:function(a,b){return a=void 0!==a?new Date(a):a,b=new Date(b),this.isSameMonth(a,b)&&a.getDate()===b.getDate()},isSameHour:function(a,b){return a=void 0!==a?new Date(a):a,b=new Date(b),this.isSameDay(a,b)&&a.getHours()===b.getHours()},isSameMinutes:function(a,b){return a=void 0!==a?new Date(a):a,b=new Date(b),this.isSameHour(a,b)&&a.getMinutes()===b.getMinutes()},isValidDate:function(a){return a&&!(a.getTime&&a.getTime()!==a.getTime())}}});var b=a.module("datePicker");b.directive("dateRange",function(){return{templateUrl:"templates/daterange.html",scope:{start:"=",end:"="},link:function(a,b,c){a.start=new Date(a.start||new Date),a.end=new Date(a.end||new Date),c.$observe("disabled",function(b){a.disableDatePickers=!!b}),a.$watch("start.getTime()",function(b){b&&a.end&&b>a.end.getTime()&&(a.end=new Date(b))}),a.$watch("end.getTime()",function(b){b&&a.start&&b<a.start.getTime()&&(a.start=new Date(b))})}}});var c="ng-pristine",d="ng-dirty",b=a.module("datePicker");b.constant("dateTimeConfig",{template:function(a){return'<div date-picker="'+a.ngModel+'" '+(a.view?'view="'+a.view+'" ':"")+(a.maxView?'max-view="'+a.maxView+'" ':"")+(a.autoClose?'auto-close="'+a.autoClose+'" ':"")+(a.template?'template="'+a.template+'" ':"")+(a.minView?'min-view="'+a.minView+'" ':"")+(a.partial?'partial="'+a.partial+'" ':"")+(a.step?'step="'+a.step+'" ':"")+'class="date-picker-date-time"></div>'},format:"yyyy-MM-dd HH:mm",views:["date","year","month","hours","minutes"],autoClose:!1,position:"relative"}),b.directive("dateTimeAppend",function(){return{link:function(a,b){b.bind("click",function(){b.find("input")[0].focus()})}}}),b.directive("dateTime",["$compile","$document","$filter","dateTimeConfig","$parse","datePickerUtils",function(b,e,f,g,h,i){var j=e.find("body"),k=f("date");return{require:"ngModel",scope:!0,link:function(e,f,l,m){function n(a){return k(a,s)}function o(a){return a.length===s.length?a:void 0}function p(a){a.stopPropagation(),m.$pristine&&(m.$dirty=!0,m.$pristine=!1,f.removeClass(c).addClass(d),t&&t.$setDirty(),m.$render())}function q(){y&&(y.remove(),y=null),A&&(A.remove(),A=null)}function r(){if(!y){if(y=b(D)(e),e.$digest(),e.$on("setDate",function(a,b,c){p(a),x&&u[u.length-1]===c&&q()}),e.$on("hidePicker",function(){f.triggerHandler("blur")}),e.$on("$destroy",q),"absolute"===z){var c=a.extend(f.offset(),{height:f[0].offsetHeight});y.css({top:c.top+c.height,left:c.left,display:"block",position:z}),j.append(y)}else A=a.element("<div date-picker-wrapper></div>"),f[0].parentElement.insertBefore(A[0],f[0]),A.append(y),y.css({top:f[0].offsetHeight+"px",display:"block"});y.bind("mousedown",function(a){a.preventDefault()})}}var s=l.format||g.format,t=f.inheritedData("$formController"),u=h(l.views)(e)||g.views.concat(),v=l.view||u[0],w=u.indexOf(v),x=l.autoClose?h(l.autoClose)(e):g.autoClose,y=null,z=l.position||g.position,A=null;if(-1===w&&u.splice(w,1),u.unshift(v),m.$formatters.push(n),m.$parsers.unshift(o),a.isDefined(l.minDate)){var B;m.$validators.min=function(b){return!i.isValidDate(b)||a.isUndefined(B)||b>=B},l.$observe("minDate",function(a){B=new Date(a),m.$validate()})}if(a.isDefined(l.maxDate)){var C;m.$validators.max=function(b){return!i.isValidDate(b)||a.isUndefined(C)||C>=b},l.$observe("maxDate",function(a){C=new Date(a),m.$validate()})}var D=g.template(l);f.bind("focus",r),f.bind("blur",q)}}}]),a.module("datePicker").run(["$templateCache",function(a){a.put("templates/datepicker.html",'<div ng-switch="view">\r\n  <div ng-switch-when="date">\r\n    <table>\r\n      <thead>\r\n      <tr>\r\n        <th ng-click="prev()">&lsaquo;</th>\r\n        <th colspan="5" class="switch" ng-click="setView(\'month\')" ng-bind="date|date:\'yyyy MMMM\'"></th>\r\n        <th ng-click="next()">&rsaquo;</i></th>\r\n      </tr>\r\n      <tr>\r\n        <th ng-repeat="day in weekdays" style="overflow: hidden" ng-bind="day|date:\'EEE\'"></th>\r\n      </tr>\r\n      </thead>\r\n      <tbody>\r\n      <tr ng-repeat="week in weeks">\r\n        <td ng-repeat="day in week">\r\n          <span\r\n            ng-class="{\'now\':isNow(day),\'active\':isSameDay(day),\'disabled\':(day.getMonth()!=date.getMonth()),\'after\':isAfter(day),\'before\':isBefore(day)}"\r\n            ng-click="setDate(day)" ng-bind="day.getDate()"></span>\r\n        </td>\r\n      </tr>\r\n      </tbody>\r\n    </table>\r\n  </div>\r\n  <div ng-switch-when="year">\r\n    <table>\r\n      <thead>\r\n      <tr>\r\n        <th ng-click="prev(10)">&lsaquo;</th>\r\n        <th colspan="5" class="switch"ng-bind="years[0].getFullYear()+\' - \'+years[years.length-1].getFullYear()"></th>\r\n        <th ng-click="next(10)">&rsaquo;</i></th>\r\n      </tr>\r\n      </thead>\r\n      <tbody>\r\n      <tr>\r\n        <td colspan="7">\r\n          <span ng-class="{\'active\':isSameYear(year),\'now\':isNow(year)}"\r\n                ng-repeat="year in years"\r\n                ng-click="setDate(year)" ng-bind="year.getFullYear()"></span>\r\n        </td>\r\n      </tr>\r\n      </tbody>\r\n    </table>\r\n  </div>\r\n  <div ng-switch-when="month">\r\n    <table>\r\n      <thead>\r\n      <tr>\r\n        <th ng-click="prev()">&lsaquo;</th>\r\n        <th colspan="5" class="switch" ng-click="setView(\'year\')" ng-bind="date|date:\'yyyy\'"></th>\r\n        <th ng-click="next()">&rsaquo;</i></th>\r\n      </tr>\r\n      </thead>\r\n      <tbody>\r\n      <tr>\r\n        <td colspan="7">\r\n          <span ng-repeat="month in months"\r\n                ng-class="{\'active\':isSameMonth(month),\'after\':isAfter(month),\'before\':isBefore(month),\'now\':isNow(month)}"\r\n                ng-click="setDate(month)"\r\n                ng-bind="month|date:\'MMM\'"></span>\r\n        </td>\r\n      </tr>\r\n      </tbody>\r\n    </table>\r\n  </div>\r\n  <div ng-switch-when="hours">\r\n    <table>\r\n      <thead>\r\n      <tr>\r\n        <th ng-click="prev(24)">&lsaquo;</th>\r\n        <th colspan="5" class="switch" ng-click="setView(\'date\')" ng-bind="date|date:\'dd MMMM yyyy\'"></th>\r\n        <th ng-click="next(24)">&rsaquo;</i></th>\r\n      </tr>\r\n      </thead>\r\n      <tbody>\r\n      <tr>\r\n        <td colspan="7">\r\n          <span ng-repeat="hour in hours"\r\n                ng-class="{\'now\':isNow(hour),\'active\':isSameHour(hour)}"\r\n                ng-click="setDate(hour)" ng-bind="hour|time"></span>\r\n        </td>\r\n      </tr>\r\n      </tbody>\r\n    </table>\r\n  </div>\r\n  <div ng-switch-when="minutes">\r\n    <table>\r\n      <thead>\r\n      <tr>\r\n        <th ng-click="prev()">&lsaquo;</th>\r\n        <th colspan="5" class="switch" ng-click="setView(\'hours\')" ng-bind="date|date:\'dd MMMM yyyy\'"></th>\r\n        <th ng-click="next()">&rsaquo;</i></th>\r\n      </tr>\r\n      </thead>\r\n      <tbody>\r\n      <tr>\r\n        <td colspan="7">\r\n          <span ng-repeat="minute in minutes"\r\n                ng-class="{active:isSameMinutes(minute),\'now\':isNow(minute)}"\r\n                ng-click="setDate(minute)"\r\n                ng-bind="minute|time"></span>\r\n        </td>\r\n      </tr>\r\n      </tbody>\r\n    </table>\r\n  </div>\r\n</div>\r\n'),a.put("templates/daterange.html",'<div>\r\n    <table>\r\n        <tr>\r\n            <td valign="top">\r\n                <div date-picker="start" ng-disabled="disableDatePickers"  class="date-picker" date after="start" before="end" min-view="date" max-view="date"></div>\r\n            </td>\r\n            <td valign="top">\r\n                <div date-picker="end" ng-disabled="disableDatePickers"  class="date-picker" date after="start" before="end"  min-view="date" max-view="date"></div>\r\n            </td>\r\n        </tr>\r\n    </table>\r\n</div>\r\n')}])}(angular),function(a,b){"function"==typeof define&&define.amd?define([],b):"object"==typeof exports?module.exports=b():a.StringMask=b()}(this,function(){function a(a,b){for(var c=0,d=b-1,e={escape:!0};d>=0&&e&&e.escape;)e=g[a.charAt(d)],c+=e&&e.escape?1:0,d--;return c>0&&c%2===1}function b(a,b){var c=a.replace(/[^0]/g,"").length,d=b.replace(/[^\d]/g,"").length;return d-c}function c(a,b,c,d){return d&&"function"==typeof d.transform&&(b=d.transform(b)),c.reverse?b+a:a+b}function d(a,b,c){var e=a.charAt(b),f=g[e];return""===e?!1:f&&!f.escape?!0:d(a,b+c,c)}function e(a,b,c){var d=a.split("");return d.splice(c>=0?c:0,0,b),d.join("")}function f(a,b){this.options=b||{},this.options={reverse:this.options.reverse||!1,usedefaults:this.options.usedefaults||this.options.reverse},this.pattern=a}var g={0:{pattern:/\d/,_default:"0"},9:{pattern:/\d/,optional:!0},"#":{pattern:/\d/,optional:!0,recursive:!0},S:{pattern:/[a-zA-Z]/},U:{pattern:/[a-zA-Z]/,transform:function(a){return a.toLocaleUpperCase()}},L:{pattern:/[a-zA-Z]/,transform:function(a){return a.toLocaleLowerCase()}},$:{escape:!0}};return f.prototype.process=function(f){function h(a){if(!p&&d(i,r,q.inc))return!0;if(p||(p=o.length>0),p){var b=o.shift();if(o.push(b),a.reverse&&l>=0)return r++,i=e(i,b,r),!0;if(!a.reverse&&l<f.length)return i=e(i,b,r),!0}return r<i.length&&r>=0}if(!f)return{result:"",valid:!1};f+="";for(var i=this.pattern,j=!0,k="",l=this.options.reverse?f.length-1:0,m=b(i,f),n=!1,o=[],p=!1,q={start:this.options.reverse?i.length-1:0,end:this.options.reverse?-1:i.length,inc:this.options.reverse?-1:1},r=q.start;h(this.options);r+=q.inc){var s=i.charAt(r),t=f.charAt(l),u=g[s];if(!p||t){if(this.options.reverse&&a(i,r)){k=c(k,s,this.options,u),r+=q.inc;continue}if(!this.options.reverse&&n){k=c(k,s,this.options,u),n=!1;continue}if(!this.options.reverse&&u&&u.escape){n=!0;continue}}if(!p&&u&&u.recursive)o.push(s);else{if(p&&!t){u&&u.recursive||(k=c(k,s,this.options,u));continue}if(o.length>0&&u&&!u.recursive){j=!1;continue}if(!p&&o.length>0&&!t)continue}if(u)if(u.optional){if(u.pattern.test(t)&&m)k=c(k,t,this.options,u),l+=q.inc,m--;else if(o.length>0&&t){j=!1;break}}else if(u.pattern.test(t))k=c(k,t,this.options,u),l+=q.inc;else{if(t||!u._default||!this.options.usedefaults){j=!1;break}k=c(k,u._default,this.options,u)}else k=c(k,s,this.options,u),!p&&o.length&&o.push(s)}return{result:k,valid:j}},f.prototype.apply=function(a){return this.process(a).result},f.prototype.validate=function(a){return this.process(a).valid},f.process=function(a,b,c){return new f(b,c).process(a)},f.apply=function(a,b,c){return new f(b,c).apply(a)},f.validate=function(a,b,c){return new f(b,c).validate(a)},f})})().bind(window);